"use strict";var __decorate=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},__extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(o,n){function a(e){try{u(i.next(e))}catch(e){n(e)}}function s(e){try{u(i.throw(e))}catch(e){n(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,s)}u((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return i([e,t])}}function i(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,n=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){u.label=r[1];break}if(6===r[0]&&u.label<a[1]){u.label=a[1],a=r;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(r);break}a[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],n=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,n,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},powerbi;!function(e){var t;!function(t){function r(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y,S){var b=t.Verbose(o,n,a,s,u,l,c,p,d,v,h,g,y,S),w=m(b.info,{visualType:r,fileName:i});return{name:t.ApprovedResourceFailLoadedEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualType:w.visualType,fileName:w.fileName},null,b.formatted())},info:w,loggers:t.ApprovedResourceFailLoadedLoggers}}function i(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y,S){var b=t.Verbose(o,n,a,s,u,l,c,p,d,v,h,g,y,S),w=m(b.info,{endpoint:r,allEndpointDown:i});return{name:t.ApprovedResourceEndpointDownEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({endpoint:w.endpoint,allEndpointDown:w.allEndpointDown},null,b.formatted())},info:w,loggers:t.ApprovedResourceEndpointDownLoggers}}function o(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.CustomerAction(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{resourcePackageName:r});return{name:t.ApproveResourceLoadResourcePackageEventName,category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({resourcePackageName:b.resourcePackageName},null,S.formatted())},info:b,loggers:t.ApproveResourceLoadResourcePackageLoggers}}function n(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.Verbose(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{visualType:r});return{name:t.VisualConsentRegisterEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualType:b.visualType},null,S.formatted())},info:b,loggers:t.VisualConsentRegisterLoggers}}function a(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y,S){var b=t.CustomerAction(o,n,a,s,u,l,c,p,d,v,h,g,y,S),w=m(b.info,{visualType:r,userConsent:i});return{name:t.VisualConsentSetEventName,category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualType:w.visualType,userConsent:w.userConsent},null,b.formatted())},info:w,loggers:t.VisualConsentSetLoggers}}function s(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.Verbose(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{visualTypes:r});return{name:t.VisualConsentGetEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualTypes:b.visualTypes},null,S.formatted())},info:b,loggers:t.VisualConsentGetLoggers}}function u(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y,S){var b=t.Verbose(o,n,a,s,u,l,c,p,d,v,h,g,y,S),w=m(b.info,{requestedVisualTypes:r,actualVisualTypes:i});return{name:t.TrustedVisualLoadEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({requestedVisualTypes:w.requestedVisualTypes,actualVisualTypes:w.actualVisualTypes},null,b.formatted())},info:w,loggers:t.TrustedVisualLoadLoggers}}function l(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.Verbose(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{visualTypes:r});return{name:t.TrustedVisualGetConsentEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualTypes:b.visualTypes},null,S.formatted())},info:b,loggers:t.TrustedVisualGetConsentLoggers}}function c(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.Verbose(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{visualType:r});return{name:t.VisualAuthenticationGetAADTokenEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualType:b.visualType},null,S.formatted())},info:b,loggers:t.VisualAuthenticationGetAADTokenLoggers}}function p(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.Verbose(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{visualType:r});return{name:t.VisualAuthenticationGetWACTokenEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualType:b.visualType},null,S.formatted())},info:b,loggers:t.VisualAuthenticationGetWACTokenLoggers}}function d(r,i,o,n,a,s,u,l,c,p,d,v,h,g){var y=t.Verbose(r,i,o,n,a,s,u,l,c,p,d,v,h,g),S=m(y.info,{});return{name:t.LocalResourceLoadResourcePackageItemEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted(null,null,y.formatted())},info:S,loggers:t.LocalResourceLoadResourcePackageItemLoggers}}function v(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y,S){var b=t.Verbose(o,n,a,s,u,l,c,p,d,v,h,g,y,S),w=m(b.info,{visualType:r,reason:i});return{name:t.VisualAuthenticationBlockAccessTokenEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({visualType:w.visualType,reason:w.reason},null,b.formatted())},info:w,loggers:t.VisualAuthenticationBlockAccessTokenLoggers}}function h(r,i,o,n,a,s,u,l,c,p,d,v,h,g,y){var S=t.Verbose(i,o,n,a,s,u,l,c,p,d,v,h,g,y),b=m(S.info,{AdminControlState:r});return{name:t.AdminControlInitializedEventName,category:e.TelemetryCategory.Verbose,time:Date.now(),id:f(),formatted:function(){return e.extendFormatted({AdminControlState:b.AdminControlState},null,S.formatted())},info:b,loggers:t.AdminControlInitializedLoggers}}var f,g=jsCommon.Utility,m=jsCommon.UnionExtensions.mergeUnionType,y=e.telemetry.EventFactories;f=g?g.generateGuid:Function.prototype,t.ApprovedResourceFailLoadedEventName="PBI.ApprovedResource.FailLoaded",t.ApprovedResourceFailLoaded=r,y[t.ApprovedResourceFailLoadedEventName]=function(r){return e.telemetryEventFactory(t.ApprovedResourceFailLoadedEventName,r,t.ApprovedResourceFailLoadedLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.ApprovedResourceEndpointDownEventName="PBI.ApprovedResource.EndpointDown",t.ApprovedResourceEndpointDown=i,y[t.ApprovedResourceEndpointDownEventName]=function(r){return e.telemetryEventFactory(t.ApprovedResourceEndpointDownEventName,r,t.ApprovedResourceEndpointDownLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.ApproveResourceLoadResourcePackageEventName="PBI.ApproveResource.LoadResourcePackage",t.ApproveResourceLoadResourcePackage=o,y[t.ApproveResourceLoadResourcePackageEventName]=function(r){return e.telemetryEventFactory(t.ApproveResourceLoadResourcePackageEventName,r,t.ApproveResourceLoadResourcePackageLoggers,t.CustomerActionEventName,e.TelemetryCategory.CustomerAction,void 0,void 0,void 0,null)},t.VisualConsentRegisterEventName="PBI.VisualConsent.Register",t.VisualConsentRegister=n,y[t.VisualConsentRegisterEventName]=function(r){return e.telemetryEventFactory(t.VisualConsentRegisterEventName,r,t.VisualConsentRegisterLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.VisualConsentSetEventName="PBI.VisualConsent.Set",t.VisualConsentSet=a,y[t.VisualConsentSetEventName]=function(r){return e.telemetryEventFactory(t.VisualConsentSetEventName,r,t.VisualConsentSetLoggers,t.CustomerActionEventName,e.TelemetryCategory.CustomerAction,void 0,void 0,void 0,null)},t.VisualConsentGetEventName="PBI.VisualConsent.Get",t.VisualConsentGet=s,y[t.VisualConsentGetEventName]=function(r){return e.telemetryEventFactory(t.VisualConsentGetEventName,r,t.VisualConsentGetLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.TrustedVisualLoadEventName="PBI.TrustedVisual.Load",t.TrustedVisualLoad=u,y[t.TrustedVisualLoadEventName]=function(r){return e.telemetryEventFactory(t.TrustedVisualLoadEventName,r,t.TrustedVisualLoadLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.TrustedVisualGetConsentEventName="PBI.TrustedVisual.GetConsent",t.TrustedVisualGetConsent=l,y[t.TrustedVisualGetConsentEventName]=function(r){return e.telemetryEventFactory(t.TrustedVisualGetConsentEventName,r,t.TrustedVisualGetConsentLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.VisualAuthenticationGetAADTokenEventName="PBI.VisualAuthentication.GetAADToken",t.VisualAuthenticationGetAADToken=c,y[t.VisualAuthenticationGetAADTokenEventName]=function(r){return e.telemetryEventFactory(t.VisualAuthenticationGetAADTokenEventName,r,t.VisualAuthenticationGetAADTokenLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.VisualAuthenticationGetWACTokenEventName="PBI.VisualAuthentication.GetWACToken",t.VisualAuthenticationGetWACToken=p,y[t.VisualAuthenticationGetWACTokenEventName]=function(r){return e.telemetryEventFactory(t.VisualAuthenticationGetWACTokenEventName,r,t.VisualAuthenticationGetWACTokenLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.LocalResourceLoadResourcePackageItemEventName="PBI.LocalResource.LoadResourcePackageItem",t.LocalResourceLoadResourcePackageItem=d,y[t.LocalResourceLoadResourcePackageItemEventName]=function(r){return e.telemetryEventFactory(t.LocalResourceLoadResourcePackageItemEventName,r,t.LocalResourceLoadResourcePackageItemLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.VisualAuthenticationBlockAccessTokenEventName="PBI.VisualAuthentication.BlockAccessToken",t.VisualAuthenticationBlockAccessToken=v,y[t.VisualAuthenticationBlockAccessTokenEventName]=function(r){return e.telemetryEventFactory(t.VisualAuthenticationBlockAccessTokenEventName,r,t.VisualAuthenticationBlockAccessTokenLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)},t.AdminControlInitializedEventName="PBI.AdminControl.Initialized",t.AdminControlInitialized=h,y[t.AdminControlInitializedEventName]=function(r){return e.telemetryEventFactory(t.AdminControlInitializedEventName,r,t.AdminControlInitializedLoggers,t.VerboseEventName,e.TelemetryCategory.Verbose,void 0,void 0,void 0,null)}}(t=e.telemetry||(e.telemetry={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.EsriVisual="esriVisual",e.EsriTestVisual="esriVisual_TEST",e.VisioVisual="Visio_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",e.VisioDFVisual="VisioDF_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",e.PowerAppsVisual="PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A",e.PowerAppsTestVisual="PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A_TEST",e.MapboxVisual="PBI_CV_EB3A4088_75C5_4746_9D8B_255A7B7ECD6C",e.PowerOnVPMenuVisual="vPMenu6454E8C4E1BD492A83084AB46B0C248B",e.PowerOnDEMatrixV2Visual="DataEntryMatrix1444757060245",e.PowerOnDEMatrixV3Visual="PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD",e.PowerOnDetailReportVisual="detailReport1E51681FC15F46F9B4275CE593BECB98",e.PowerOnSmartFilterVisual="SmartFilterBySQLBI1458262140626",e.PowerOnTableEditorVisual="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181",e.PowerOnTableEditorV2Visual="tableeditor_v2",e.PowerOnForecasterVisual="PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E",e.PowerOnDraggableChartVisual="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182",e.PowerOnVPMenuVisual_TEST="vPMenu6454E8C4E1BD492A83084AB46B0C248B_TEST",e.PowerOnDEMatrixV2Visual_TEST="DataEntryMatrix1444757060245_TEST",e.PowerOnDEMatrixV3Visual_TEST="PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD_TEST",e.PowerOnDetailReportVisual_TEST="detailReport1E51681FC15F46F9B4275CE593BECB98_TEST",e.PowerOnSmartFilterVisual_TEST="SmartFilterBySQLBI1458262140626_TEST",e.PowerOnTableEditorVisual_TEST="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181_TEST",e.PowerOnTableEditorV2Visual_TEST="tableeditor_v2_TEST",e.PowerOnForecasterVisual_TEST="PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E_TEST",e.PowerOnDraggableChartVisual_TEST="PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182_TEST",e.OrgStoreVisualSuffix="_OrgStore",e.TrustedVisuals=[e.EsriVisual,e.EsriTestVisual,e.VisioVisual,e.VisioDFVisual,e.PowerAppsVisual,e.PowerAppsTestVisual,e.MapboxVisual,e.PowerOnVPMenuVisual,e.PowerOnDEMatrixV2Visual,e.PowerOnDEMatrixV3Visual,e.PowerOnDetailReportVisual,e.PowerOnSmartFilterVisual,e.PowerOnTableEditorVisual,e.PowerOnTableEditorV2Visual,e.PowerOnForecasterVisual,e.PowerOnDraggableChartVisual,e.PowerOnVPMenuVisual_TEST,e.PowerOnDEMatrixV2Visual_TEST,e.PowerOnDEMatrixV3Visual_TEST,e.PowerOnDetailReportVisual_TEST,e.PowerOnSmartFilterVisual_TEST,e.PowerOnTableEditorVisual_TEST,e.PowerOnTableEditorV2Visual_TEST,e.PowerOnForecasterVisual_TEST,e.PowerOnDraggableChartVisual_TEST];var t;!function(e){e.RegisteredResources="RegisteredResources",e.SharedResources="SharedResources"}(t=e.ResourcePackageName||(e.ResourcePackageName={}));var r;!function(e){e.ResourcePackageNames=[],e.ResourcePackageNames[1]=t.RegisteredResources,e.ResourcePackageNames[2]=t.SharedResources,e.StaticResourcesDictionary={},e.StaticResourcesDictionary[1]=!0,e.StaticResourcesDictionary[2]=!0}(r=e.constants||(e.constants={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.resourceLoaderHttpTimeout=3e4,e.visualCDNBlobDevName="dev",e.visualCDNBlobDefaultName="prod",e.visualCDNBlobAppStoreName="app-store"}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.reloadEmptyVisuals={type:4,name:"reloadEmptyVisuals"}}(t=e.events||(e.events={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){e.BaseTheme="BaseTheme",e.Image="Image",e.ShapeMap="ShapeMap"}(t=e.SharedResourcePackageNames||(e.SharedResourcePackageNames={}));var r;!function(e){e[e.CustomVisualJavascript=0]="CustomVisualJavascript",e[e.CustomVisualsCss=1]="CustomVisualsCss",e[e.CustomVisualScreenshot=2]="CustomVisualScreenshot",e[e.CustomVisualIcon=3]="CustomVisualIcon",e[e.CustomVisualWatermark=4]="CustomVisualWatermark",e[e.CustomVisualMetadata=5]="CustomVisualMetadata",e[e.Image=100]="Image",e[e.ShapeMap=200]="ShapeMap",e[e.CustomTheme=201]="CustomTheme",e[e.BaseTheme=202]="BaseTheme",e[e.DashboardTheme=203]="DashboardTheme",e[e.DashboardBaseTheme=204]="DashboardBaseTheme",e[e.HighContrastTheme=205]="HighContrastTheme",e[e.AppNavigation=206]="AppNavigation",e[e.AppTheme=207]="AppTheme",e[e.AppBaseTheme=208]="AppBaseTheme"}(r=e.ResourcePackageItemType||(e.ResourcePackageItemType={}))}(t=e.contracts||(e.contracts={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){return i(e,t,!1)}function r(e,t){return i(e,t,!0)}function i(e,t,r){if(void 0!==e){var i=t.defer(),o=new FileReader;return o.onload=function(){i.resolve(o.result)},o.onerror=function(){i.reject(o.error)},r?o.readAsText(e):o.readAsDataURL(e),i.promise}}e.readAsDataUrl=t,e.readAsText=r}(t=e.BlobHelper||(e.BlobHelper={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){var r,i=e.contracts.ResourcePackageItemType,o=e.visualHost.constants.ResourcePackageNames,n=e.visualHost.constants.StaticResourcesDictionary;!function(e){function t(e,t){return m[t](e)}function r(e,r,i){return{type:r,path:t(e,r),name:e,content:i}}function a(e){return _.keyBy(_.filter(e,function(e){return s(e)}),function(e){return e.name})}function s(e){return!!n[e.type]}function u(e,t,r){r=d(t,r);var i=l(e,t,r);return i||(i={id:void 0,name:r,type:t,items:[]},e.push(i)),i}function l(e,t,r){return r=d(t,r),_.find(e,function(e){return e.type===t&&e.name===r})}function c(e,t,r,i){return p(l(e,t,i),r)}function p(e,t){return _.find(e&&e.items,function(e){return e.name===t})}function d(e,t){var r=o[e]||t;return r}function v(t,r){null==t.id&&null!=r.id&&(t.id=r.id);for(var i=0,o=r.items;i<o.length;i++){var n=o[i],a=e.findItemInPackage(t,n.name);a?g(a,n):t.items.push(n)}}function h(e){return e&&(0===e.type||3===e.type)}function f(t){return _.chain(t).filter(function(t){return e.isCustomVisualResourcePackage(t)}).map(function(e){return e.name}).uniq().value()}function g(e,t){null==e.id&&null!=t.id&&(e.id=t.id),!e.content&&t.content&&(e.content=t.content),!e.contentBlob&&t.contentBlob&&(e.contentBlob=t.contentBlob),!e.contentBlobUrl&&t.contentBlobUrl&&(e.contentBlobUrl=t.contentBlobUrl),e.content||e.contentBlob||e.promise||!t.promise||(e.promise=t.promise)}var m={};m[i.BaseTheme]=function(e){return"BaseThemes/"+e+".json"},m[i.CustomTheme]=function(e){return"BuiltInThemes/"+e+".json"},m[i.HighContrastTheme]=function(e){return"HighContrastThemes/"+e+".json"},m[i.Image]=function(e){return"Images/"+e},m[i.ShapeMap]=function(e){return"Shapemaps/"+e+".json"},e.getSharedResourcePath=t,e.newSharedResourceItem=r,e.getStaticResources=a,e.isStaticResource=s,e.ensureResourcePackage=u,e.findResourcePackage=l,e.findItemInPackages=c,e.findItemInPackage=p,e.ensurePackageName=d,e.mergeStaticResourcePackages=v,e.isCustomVisualResourcePackage=h,e.getCustomVisualTypes=f}(r=t.ResourcePackageUtils||(t.ResourcePackageUtils={}))}(r=t.utils||(t.utils={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r,i=e.visualHost.BlobHelper,o=e.data.DataViewObjectDefinitions,n=e.data.services.DataViewObjectSerializer,a=e.contracts.ResourcePackageItemType,s=e.visualHost.utils.ResourcePackageUtils,u=e.data.SQExprBuilder,l=e.data.SQResourcePackageItemExpr,c=jsCommon.Trace,p=jsCommon.UrlUtils;!function(t){function r(e,t,r,i,o,n){if(!e)return o.resolve(null);for(var a=C(e,t,n),s=[],u=0,l=a;u<l.length;u++){var c=l[u],p=c.getRefValue();s.push(h(p,r(),i,o,{itemTypeFromReference:c.itemType}))}return o.all(s)}function d(e,t,r,i,o,a){if(!e)return o.resolve(null);for(var s=n.serializeObjects(e,t),u=n.deserializeObjects(s,t),l=C(u,t),c=[],p=function(e){var t=e.getRefValue(),n=h(t,r,i,o,{usePersistableFormat:a,itemTypeFromReference:e.itemType}).then(function(t){e.setRefValue(t)});c.push(n)},d=0,v=l;d<v.length;d++){p(v[d])}var f=o.defer();return o.all(c).then(function(){return f.resolve(u)}),f.promise}function v(e,t){return!!e&&C(e,t).length>0}function h(e,t,r,i,o){return g(t,{packageType:e.packageType,packageName:e.packageName,itemName:e.itemName},r,i,o).then(function(e){return null==e?u.nullConstant():u.text(e)},function(e){return u.nullConstant()})}function f(e){return e?"string"==typeof e?e:null!=e.status?e.status.toString():e.message?e.message.toString():"Unknown reason":""}function g(e,t,r,i,o){var n=s.findResourcePackage(e,t.packageType,t.packageName);if(!n){c.error("Missing resource package "+t.packageType,!0);var a=void 0;if(2===t.packageType&&o&&null!=(a=o.itemTypeFromReference)){var u=s.getSharedResourcePath(t.itemName,a);return r.loadSharedResource(u,a).catch(function(e){c.error("Error loading shared resource from app "+u+" "+f(e),!1)})}return i.resolve()}return m(n,t.itemName,r,i,o)}function m(e,t,r,i,o){var n=o&&o.usePersistableFormat,a=o&&o.itemTypeFromReference;if(!e)return i.resolve();var u=s.findItemInPackage(e,t);!u&&2===e.type&&a&&e&&a&&(u=s.newSharedResourceItem(t,a),e.items.push(u));var l;if(!u||!u.path)return c.error("Missing resource item or path !resourcePackageItem="+!u+", resourcePackageItem.path="+(u&&u.path),!0),i.resolve();l=2===e.type?u.content?i.resolve(u.content):u.promise?u.promise:u.promise=r.loadSharedResource(u.path,u.type).finally(function(){delete u.promise}).then(function(e){return e instanceof Blob?u.contentBlob=e:(_.isString(e)||(e=JSON.stringify(e)),u.content=e)},function(e){c.error("Error loading shared resource from app "+u.path+" "+f(e),!1)}):r.loadResourcePackageItem(e,t);var p=i.defer();return l.finally(function(){w(e,u,i,n,a).then(function(e){return p.resolve(e)})}),p.promise}function y(e,t,r,i){if(r){var o=s.findResourcePackage(r,1);if(o)return t.loadResourcePackageItem(o,i)}return e.reject()}function S(t,r,i,o){return y(t,r,i,o).then(function(r){return r instanceof Blob?e.visualHost.BlobHelper.readAsDataUrl(r,t):("string"!=typeof r||p.isDataUri(r)||(r=p.makeJsonDataUri(r)),r)})}function b(t,r,i,o){return y(t,r,i,o).then(function(r){return r instanceof Blob?e.visualHost.BlobHelper.readAsText(r,t):r}).then(function(e){try{"string"==typeof e&&p.isDataUri(e)&&(e=p.atou(p.getBase64ContentFromDataUri(e)))}catch(t){c.error("Error decoding registeredResource: "+JSON.stringify(t),!!t.stack),e=void 0}return e})}function w(e,t,r,o,n){var s=null;if(t){var u=n===a.ShapeMap||t.type===a.ShapeMap,l=t.type===a.BaseTheme||t.type===a.CustomTheme||t.type===a.HighContrastTheme,c=3===e.type||0===e.type,d=t.content;if(d)u&&p.isDataUri(d)&&(d=p.atou(p.getBase64ContentFromDataUri(d))),s=d;else if(t.contentBlob){if(2===e.type&&t.type===a.Image||o||u||c||l){var v=r.defer(),h=u||c||l?i.readAsText:i.readAsDataUrl;return h(t.contentBlob,r).then(function(e){return v.resolve(e)},function(e){return v.resolve(null)}),v.promise}t.contentBlobUrl||(t.contentBlobUrl=window.URL.createObjectURL(t.contentBlob)),s=t.contentBlobUrl}}return r.resolve(s)}function C(t,r,i){var n=[];return o.visitPropertyExprs({definitions:t,descriptors:r,visitor:function(t,r,o,c,p){var d=c&&c.geoJson&&1===p.length&&"content"===p[0];if(d){var v=r;if(17===v.type.kind&&17===v.name.kind&&17===v.content.kind){if(v.type.value===e.GeoJsonTypes.shared){var h=v.name.value;if("string"==typeof h){null==v.content.value&&(i&&i(h,a.ShapeMap),t=u.resourcePackageItem(s.ensurePackageName(2),2,h),v.content=t)}}}}if(t instanceof l){var f={getRefValue:function(){return r[o]},setRefValue:function(e){r[o]=e}};d&&(f.itemType=a.ShapeMap),n.push(f)}}}),n}t.loadFromDataViewObjects=r,t.loadAndResolveFromDataViewObjects=d,t.hasResourceReferencesToResolve=v,t.loadAndResolveFromSQExpr=h,t.getLoadAndResolveErrorReason=f,t.loadAndResolveItemContent=g,t.loadAndResolveContent=m,t.loadRegisteredResource=y,t.loadRegisteredResourceAsDataUri=S,t.loadRegisteredResourceAsDecodedString=b}(r=t.ResourcePackageReferenceResolver||(t.ResourcePackageReferenceResolver={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){for(var r,i=t.split(".");r=i.shift();){if(!e||void 0===e[r]||null===e[r])return!1;e=e[r]}return!0}e.isDefined=t}(t=e.VisualHostUtils||(e.VisualHostUtils={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r){return new o(e,t,r)}function i(e,t,r){return new o(e,t,r,(!0))}t.createApprovedResourceLoader=r,t.createPhantomJsApprovedResourceLoader=i;var o=function(){function r(e,t,r,i){this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.approvedResourceService=t,this.customVisualEndpoints=this.initEndpoints(),this.telemetryService=r,this.heartBeatPromises=[],this.onlyApprovedForServerRenderResources=i}return r.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(t){var r=this,i=function(i,o){r.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded,t.name,i,r.telemetryService.root.id,!0,"PowerBI",o)};return this.checkCustomVisualEndpointHeartBeat().catch(function(e){return r.promiseFactory.reject(e)}).then(function(e){var o=[];return r.approvedResourceService.isApprovedResource(t.name)?(r.approvedResourceService.hasApi(t.name)?o.push(r.loadResourcesWithVisualApi(e,t,i)):o=o.concat(r.loadResourcesWithoutVisualApi(e,t,i)),r.promiseFactory.all(o)):r.promiseFactory.reject("Visual is not an approved visual")})},r.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},r.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.loadVisualPlugin=function(r){var i=this.promiseFactory.defer();return r&&r.items&&r.items.length>0?this.loadResourcePackage(r).then(function(){var o=e.visuals.plugins[r.name];o?(o.iconUrl=t.resourceInjector.getInjectedIconUrl(r.name),i.resolve(o)):i.reject("Unable to load visual plugin from resource package: "+r.name)}).catch(function(){i.reject("failed to resolve all promises")}):i.resolve(null),i.promise},r.prototype.destroy=function(){},r.prototype.loadResourcesWithoutVisualApi=function(r,i,o){var n=this,a=[],s=this.approvedResourceService.cdnUrlBuilder(r,i.name,".js"),u=t.resourceInjector.injectJsUrl(this.promiseFactory,i.name,s);u.then(function(){var t=e.visuals.plugins[i.name];return t?(t.isDeprecated=n.approvedResourceService.isDeprecated(i.name),t.source=2,e.extensibility.visualPluginAdapter.transformPlugin(t),n.promiseFactory.resolve(t)):n.promiseFactory.reject("Unable to load visual plugin from resource package: "+i.name)}).catch(function(e){return o(s,JSON.stringify(e)),n.promiseFactory.reject(e)}),a.push(u);var l=this.approvedResourceService.cdnUrlBuilder(r,i.name,".css"),c=t.resourceInjector.injectCssUrl(this.promiseFactory,i.name,l);return c.catch(function(e){return o(l,JSON.stringify(e)),n.promiseFactory.reject(e)}),a.push(c),a},r.prototype.loadResourcesWithVisualApi=function(r,i,o){var n=this,a=this.approvedResourceService.cdnUrlBuilder(r,i.name,t.CustomVizJSONSuffix),s=this.promiseFactory.defer();return $.ajax({url:a,type:"GET",timeout:t.resourceLoaderHttpTimeout,dataType:"json"}).done(function(r){i.items&&i.items[0]&&(i.items[0].content=JSON.stringify(r));var o=t.visualPluginUtility.createVisualPlugin(r,n.locale,2);o&&(o.isDeprecated=n.approvedResourceService.isDeprecated(i.name),o.approvedForNoIframe=n.approvedResourceService.isApprovedForNoIframe(i.name)),e.extensibility.visualPluginAdapter.transformPlugin(o);var a=e.visuals.plugins[o.name];a&&(o.favoriteId=a.favoriteId,o.isOutOfBox=a.isOutOfBox),e.visuals.plugins[o.name]=o,s.resolve(null)}).fail(function(e){var t=JSON.stringify(e);o(a,t),s.reject(t)}),s.promise},r.prototype.initEndpoints=function(){return(e.customVisualsUrl||r.defaultCustomVisualEndpoints).split(";")},r.prototype.checkCustomVisualEndpointHeartBeat=function(){var e=this.promiseFactory.defer();return this.heartBeatPromises.push(e),r.customVisualEndpoint?e.resolve(r.customVisualEndpoint):1===this.heartBeatPromises.length&&this.checkNextEndpoint(),e.promise},r.prototype.checkNextEndpoint=function(t){var i=this;t=t||0;var o=this.customVisualEndpoints[t];this.approvedResourceService.loadApprovedResourcesMetadata(o,this.onlyApprovedForServerRenderResources,this.promiseFactory).then(function(){i.telemetryService.logEvent(e.telemetry.ApprovedResourceEndpointDown,o,!1,i.telemetryService.root.id,!1,"PowerBI"),r.customVisualEndpoint=o;for(var t;void 0!==(t=i.heartBeatPromises.pop());)t.resolve(o)}).catch(function(r){var o=t+1;if(i.telemetryService.logEvent(e.telemetry.ApprovedResourceEndpointDown,i.customVisualEndpoints[t],o===i.customVisualEndpoints.length,i.telemetryService.root.id,!0,"PowerBI",r),++t<i.customVisualEndpoints.length)i.checkNextEndpoint(t);else for(var n=void 0;void 0!==(n=i.heartBeatPromises.pop());)n.reject("All Custom Visual Endpoints Are Down")})},r.defaultCustomVisualEndpoints="https://visuals.azureedge.net/;https://visuals2.azureedge.net/;https://extendcustomvisual.blob.core.windows.net/",r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var commonGlobals=window,powerbi;!function(e){var t;!function(t){function r(e,t,r){return new n(e,t,r)}var i=jsCommon.Version.gt,o=jsCommon.BrowserUtility;t.createApprovedResourceService=r;var n=function(){function r(e,r,i){var o=this;this.options=r,this.telemetryService=i,this.trustedVisuals=t.TrustedVisuals,this.legacy="legacy",e.getFeatureSwitches().then(function(e){o.appStoreCdnOverride=e.appStoreCdnOverride})}return r.prototype.isApprovedVisualsDefined=function(){return!!this.approvedVisuals},r.prototype.isApprovedResource=function(e){return!!this.approvedVisuals&&!!this.approvedVisuals[e]},r.prototype.isApprovedResourceServerRender=function(e){var t=this.getCompatibleVisualVersion(e);return this.isApprovedResource(e)&&!!t&&!!t.approvedForServerRender},r.prototype.isApprovedForNoIframe=function(e){if(this.onlyApprovedForServerRenderResources||o.isInternetExplorerBrowser())return!1;var t=this.getCompatibleVisualVersion(e);return!!t&&!!t.approvedForNoIframe},r.prototype.isTrustedResource=function(e){return!!_.find(this.trustedVisuals,function(t){return t===e})},r.prototype.addTrustedVisual=function(e){this.isTrustedResource(e)||this.trustedVisuals.push(e)},r.prototype.isDeprecated=function(e){var t=this.getCompatibleVisualVersion(e);return this.isApprovedResource(e)&&!!t&&!!t.isDeprecated},r.prototype.canUseLocalStorage=function(e){if(this.onlyApprovedForServerRenderResources)return!1;var t=this.getCompatibleVisualVersion(e);return!!t&&(!!this.isApprovedResource(e)&&t.canUseLocalStorage)},r.prototype.removeApprovedResource=function(e){this.approvedVisuals&&(this.approvedVisuals[e]=void 0)},r.prototype.getCdnEnvEndpointName=function(r){var i=e.visualCDNBlobContainerUrl||t.visualCDNBlobDefaultName;return this.appStoreCdnOverride&&(i=t.visualCDNBlobAppStoreName),r+i},r.prototype.loadApprovedResourcesMetadata=function(e,r,i){var o=this;r&&(this.onlyApprovedForServerRenderResources=!0);var n=i.defer();return this.approvedVisuals?(this.setApprovedResources(null,this.onlyApprovedForServerRenderResources),n.resolve(null),n.promise):($.ajax({url:this.getCdnEnvEndpointName(e)+"/approvedResources.json",type:"GET",timeout:t.resourceLoaderHttpTimeout,dataType:"json"}).done(function(e){o.setApprovedResources(e,o.onlyApprovedForServerRenderResources),n.resolve(null)}).fail(function(e){n.reject(JSON.stringify(e))}),n.promise)},r.prototype.cdnUrlBuilder=function(e,t,r){var i=this.getCompatibleApiVersion(t);return i?this.getCdnEnvEndpointName(e)+"/"+i+"/"+t+r:this.getCdnEnvEndpointName(e)+"/"+t+r},r.prototype.getTrustedResources=function(){return this.trustedVisuals},r.prototype.hasApi=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!!this.approvedVisuals&&!!t&&!!t.apiVersion&&t.apiVersion!==this.legacy)},r.prototype.getTelemetryUsageLimit=function(e){var t=this.getCompatibleVisualVersion(e);return t&&this.isApprovedResource(e)?t.telemetryUsageLimit||0:0;
},r.prototype.canRefreshHostData=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!!this.isApprovedResource(e)&&t.canRefreshHostData)},r.prototype.canGetAADToken=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!this.blockedAccessToken(e)&&(!!this.isApprovedResource(e)&&t.canGetAADToken))},r.prototype.blockedAccessToken=function(t){var r="user_impersonation",i="__Tokens.WAC";if(this.options&&this.options.shouldBlockAccessToken())return this.telemetryService&&this.telemetryService.logEvent(e.telemetry.VisualAuthenticationBlockAccessToken,t,"Access Token does not exists in publishToWeb/PaasEmbed"),!0;try{var o=JSON.parse(atob(commonGlobals.powerBIAccessToken.split(".")[1])),n=o.scp;return!(n.indexOf(r)>=0||n.indexOf(i)>=0)&&(this.telemetryService&&this.telemetryService.logEvent(e.telemetry.VisualAuthenticationBlockAccessToken,t,"Access Token is blocked due to insufficient scope"),!0)}catch(e){return!1}},r.prototype.canGetWACToken=function(e){var t=this.getCompatibleVisualVersion(e);return!!t&&(!this.blockedAccessToken(e)&&(!!this.isApprovedResource(e)&&t.canGetWACToken))},r.prototype.getAllApprovedForServerRenderResourcesTypes=function(){var e=this;if(!this.approvedVisuals)return[];var t=Object.keys(this.approvedVisuals);return _.filter(t,function(t){return e.isApprovedResourceServerRender(t)})},r.prototype.getPublicId=function(e){return this.isApprovedResource(e)&&this.approvedVisuals[e].assetId?this.approvedVisuals[e].assetId:null},r.prototype.getCompatibleApiVersion=function(t){if(!this.isApprovedResource(t))return null;if(!this.approvedVisuals[t].allVersions)return null;var r=this.approvedVisuals[t].allVersions;r.sort(function(e,t){return e.apiVersion?t.apiVersion?i(e.apiVersion,t.apiVersion)?-1:1:-1:1});for(var o=function(t){if(e.extensibility.visualApiVersions.some(function(e){return e.version===t.apiVersion}))return{value:t.apiVersion}},n=0,a=r;n<a.length;n++){var s=a[n],u=o(s);if("object"==typeof u)return u.value}return this.legacy},r.prototype.getCompatibleVisualVersion=function(e){var t=this.getCompatibleApiVersion(e);if(t)for(var r=0,i=this.approvedVisuals[e].allVersions;r<i.length;r++){var o=i[r];if(o.apiVersion===t)return o}return null},r.prototype.setApprovedResources=function(e,t){if(e&&(this.approvedVisuals=e),t){var r=this.getAllApprovedForServerRenderResourcesTypes(),i=_.pick(this.approvedVisuals,r);this.approvedVisuals=i}},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var CustomVisualsUtils=powerbi.visualHost.CustomVisualsUtils,powerbi;!function(e){var t;!function(t){function r(e,t,r,o,n){return new i(e,t,r,o,n)}t.createConditionalResourceLoader=r;var i=function(){function r(e,t,r,i,o){this.promiseFactory=e,this.resourceLoaderInitOptions=t,this.resourceLoaderFactories=r,this.approvedResourceService=i,this.customVisualsGalleryService=o,this.resourceLoaderCollection={}}return r.prototype.resourceLoaderSelector=function(e){switch(e.type){case 0:case 3:return this.getCustomVisualResourceLoader(e);case 1:case 2:return this.getStaticResourceResourceLoader()}},r.prototype.getStaticResourceResourceLoader=function(){return this.getLocalResourceLoader()},r.prototype.getCustomVisualResourceLoader=function(e){if(3===e.type)return this.getOrganizationalStoreResourceLoader();if(this.approvedResourceService.isTrustedResource(e.name)){if(this.getApprovedResourcesForTrustedVisualsEnabled())return this.getTrustedResourceLoader()}else{if(this.resourceLoaderInitOptions.getApprovedResourcesEnabled())return this.getApprovedResourceLoader();if(this.resourceLoaderInitOptions.getSandboxVisualsEnabled())return this.getSandboxResourceLoader()}return this.getLocalResourceLoader()},r.prototype.getApprovedResourcesForTrustedVisualsEnabled=function(){return this.resourceLoaderInitOptions.getApprovedResourcesEnabled()||e.visualCDNBlobContainerUrl!==t.visualCDNBlobDevName},r.prototype.getLocalResourceLoader=function(){return void 0===this.resourceLoaderCollection.localResourceLoader&&(this.resourceLoaderCollection.localResourceLoader=this.resourceLoaderFactories.localResourceLoaderFactory()),this.resourceLoaderCollection.localResourceLoader},r.prototype.getSandboxResourceLoader=function(){return void 0===this.resourceLoaderCollection.sandboxResourceLoader&&(this.resourceLoaderCollection.sandboxResourceLoader=this.resourceLoaderFactories.sandboxResourceLoaderFactory()),this.resourceLoaderCollection.sandboxResourceLoader},r.prototype.getApprovedResourceLoader=function(){return void 0===this.resourceLoaderCollection.approvedResourceLoader&&(this.resourceLoaderCollection.approvedResourceLoader=this.resourceLoaderFactories.approvedResourceLoaderFactory()),this.resourceLoaderCollection.approvedResourceLoader},r.prototype.getTrustedResourceLoader=function(){return void 0===this.resourceLoaderCollection.trustedResourceLoader&&(this.resourceLoaderCollection.trustedResourceLoader=this.resourceLoaderFactories.trustedResourceLoaderFactory()),this.resourceLoaderCollection.trustedResourceLoader},r.prototype.getOrganizationalStoreResourceLoader=function(){return void 0===this.resourceLoaderCollection.organizationalStoreResourceLoader&&(this.resourceLoaderCollection.organizationalStoreResourceLoader=this.resourceLoaderFactories.organizationalStoreResourceLoaderFactory()),this.resourceLoaderCollection.organizationalStoreResourceLoader},r.prototype.loadTrustedResourcePackages=function(e){var t=[];return t.push(this.getTrustedResourceLoader().loadTrustedResourcePackages(e)),this.promiseFactory.all(t)},r.prototype.updateResourcePackageId=function(t){if(e.visuals.plugins){var r=e.visuals.plugins[t.name];r&&(r.resourcePackageId=t.id)}return null},r.prototype.isValid=function(r){if(null==e.visuals.plugins||null==r||null==r.name)return!1;if(t.CustomVisualsUtils.isOrganizationalCustomVisual(r.name)&&3!==r.type)return!1;var i=e.visuals.plugins[r.name];return null==i||i.custom===!0},r.prototype.loadResourcePackages=function(e){for(var t=this,r=[],i=function(e){r.push(o.resourceLoaderSelector(e).loadResourcePackage(e).then(function(){return t.updateResourcePackageId(e)}))},o=this,n=0,a=e;n<a.length;n++){i(a[n])}return this.promiseFactory.all(r)},r.prototype.isPublicManagedVisual=function(e){return this.customVisualsGalleryService?this.customVisualsGalleryService.isPublicManagedVisual(e):this.promiseFactory.resolve(!1)},r.prototype.loadResourcePackage=function(r){var i=this;if(e.visualCDNBlobContainerUrl!==t.visualCDNBlobDevName&&this.isValid(r)===!1)return this.promiseFactory.reject("Attempting to load an invalid custom visual");var o,n=this.resourceLoaderSelector(r);return o=n===this.resourceLoaderCollection.approvedResourceLoader?n.loadResourcePackage(r).catch(function(e){return i.isPublicManagedVisual(r.name).then(function(e){return e||i.resourceLoaderInitOptions.getSandboxVisualsEnabled?(i.approvedResourceService.removeApprovedResource(r.name),e?i.promiseFactory.reject("Fallback is blocked for public managed visuals"):i.getSandboxResourceLoader().loadResourcePackage(r)):i.getLocalResourceLoader().loadResourcePackage(r)})}):this.isPublicManagedVisual(r.name).then(function(e){return e?i.promiseFactory.reject("Fallback is blocked for public managed visuals"):n.loadResourcePackage(r)}),o.then(function(){return i.updateResourcePackageId(r)})},r.prototype.loadVisualPlugin=function(e){return this.resourceLoaderSelector(e).loadVisualPlugin(e)},r.prototype.loadVisualPlugins=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.resourceLoaderSelector(o).loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackageItem=function(e,t){return this.resourceLoaderSelector(e).loadResourcePackageItem(e,t)},r.prototype.loadSharedResource=function(e,t){return this.getLocalResourceLoader().loadSharedResource(e,t)},r.prototype.destroy=function(){var e=this.resourceLoaderCollection;for(var t in e)e.hasOwnProperty(t)&&e[t].destroy()},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,o,n,a){return void 0===n&&(n=!1),new i(e,t,r,o,n,a)}t.createTrustedResourceLoader=r,t.CustomVizJSONSuffix=".pbiviz.json";var i=function(){function r(e,t,r,i,o,n){void 0===o&&(o=!1),this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.approvedResourceService=t,this.resourcePackagesService=r,this.customVisualEndpoints=this.initEndpoints(),this.telemetryService=i,this.onlyApprovedForServerRenderResources=o,this.resourceLoaderInitOptions=n,this.heartBeatPromises=[]}return r.prototype.loadTrustedResourcePackages=function(r){var i=[];if(r&&r.length>0)for(var o=9999,n=0,a=r;n<a.length;n++){var s=a[n];if(e.visuals.plugins[s])i.push(this.promiseFactory.resolve([e.visuals.plugins[s]]));else{var u={id:o++,name:s,type:0,items:[{name:s,type:e.contracts.ResourcePackageItemType.CustomVisualMetadata,path:s+t.CustomVizJSONSuffix}]};this.resourcePackagesService.registerPackages([u]),i.push(this.loadResourcePackage(u))}}return this.promiseFactory.all(i)},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(r){var i=this;if(this.resourceLoaderInitOptions&&!this.resourceLoaderInitOptions.getApprovedResourcesEnabled()&&e.visualCDNBlobContainerUrl!==t.visualCDNBlobDevName){var o=[];return this.promiseFactory.all(o)}return this.checkCustomVisualEndpointHeartBeat().catch(function(e){return i.promiseFactory.reject(e)}).then(function(e){var o=[];if(i.onlyApprovedForServerRenderResources&&!i.approvedResourceService.isApprovedResource(r.name))return i.promiseFactory.reject("Visual is not an approved visual");if(!i.approvedResourceService.hasApi(r.name))return i.promiseFactory.reject("The trusted visual does not have a supported API version for this client");var n=i.approvedResourceService.cdnUrlBuilder(e,r.name,t.CustomVizJSONSuffix),a=i.loadCustomVisualJson(r.name,n,r.id);return a.catch(function(e){return i.promiseFactory.reject(e)}),o.push(a),i.promiseFactory.all(o)})},r.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},r.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugins=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugin=function(e){return this.promiseFactory.reject()},r.prototype.destroy=function(){},r.prototype.loadCustomVisualJson=function(r,i,o){var n=this,a=this.promiseFactory.defer();return $.ajax({url:i,type:"GET",timeout:t.resourceLoaderHttpTimeout,dataType:"json"}).done(function(r){var i=t.visualPluginUtility.createVisualPlugin(r,n.locale,2);i.custom=!0,i.name!==t.EsriVisual&&i.name!==t.PowerAppsVisual||(i.custom=!1);var o=e.visuals.plugins[i.name];o&&(i.favoriteId=o.favoriteId,i.isOutOfBox=o.isOutOfBox),e.extensibility.visualPluginAdapter.transformPlugin(i),e.visuals.plugins[i.name]=i,a.resolve(i)}).fail(function(t){var o=JSON.stringify(t);n.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded,r,i,n.telemetryService.root.id,!0,"PowerBI",o),a.reject(o)}),a.promise},r.prototype.initEndpoints=function(){return(e.customVisualsUrl||r.defaultCustomVisualEndpoints).split(";")},r.prototype.checkCustomVisualEndpointHeartBeat=function(){function t(){var l=o[i];a.loadApprovedResourcesMetadata(l,u,s).then(function(){r.customVisualEndpoint=l;for(var e=0,t=c;e<t.length;e++){t[e].resolve(l)}}).catch(function(r){var a=i+1;if(n.logEvent(e.telemetry.ApprovedResourceEndpointDown,o[i],a===o.length,n.root.id,!0,"PowerBI",r),++i<o.length)t();else for(var s=0,u=c;s<u.length;s++){var l=u[s];l.reject("All Custom Visual Endpoints Are Down")}})}var i=0,o=this.customVisualEndpoints,n=this.telemetryService,a=this.approvedResourceService,s=this.promiseFactory,u=this.onlyApprovedForServerRenderResources,l=this.promiseFactory.defer();this.heartBeatPromises.push(l);var c=this.heartBeatPromises;return r.customVisualEndpoint?l.resolve(r.customVisualEndpoint):1===this.heartBeatPromises.length&&t(),l.promise},r.defaultCustomVisualEndpoints="https://visuals.azureedge.net/;https://visuals2.azureedge.net/;https://extendcustomvisual.blob.core.windows.net/",r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r){return new u(e,t,r||new s(e.promiseFactory))}var i=e.telemetry.LocalResourceLoadResourcePackageItemEventName,o=e.MonitorWith,n=e.contracts.ResourcePackageItemType,a=t.utils.ResourcePackageUtils;t.createResourceLoader=r;var s=function(){function e(e){this.promiseFactory=e}return e.prototype.get=function(e,t,r){return this.promiseFactory.reject()},e.prototype.getBlob=function(e,t,r){return this.promiseFactory.reject()},e}();t.DefaultSharedResourceItemProxy=s;var u=function(){function r(e,t,r){this.provider=t,this.sharedResourceItemProxy=r,this.promiseFactory=e&&e.promiseFactory,this.locale=e&&e.locale,this.telemetryV2Enabled=e&&e.telemetryV2Enabled}return r.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(e){var t=[];if(e&&e.items)for(var r=0,i=e.items;r<i.length;r++){var o=i[r];t.push(this.loadCustomVisualResourcePackageItem(o,e))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackageItem=function(e,t){var r=a.findItemInPackage(e,t);return r?r.content?this.promiseFactory.resolve(r.content):this.loadBlob(e.id,e.name,r):this.promiseFactory.resolve(null)},r.prototype.loadSharedResource=function(e,t){return t===n.Image?this.sharedResourceItemProxy.getBlob(null,a.ensurePackageName(2),e,{retries:1}):this.sharedResourceItemProxy.get(null,a.ensurePackageName(2),e,{retries:1})},r.prototype.loadVisualPlugin=function(t){var r=this,i=this.promiseFactory.defer();return t&&t.items&&t.items.length>0?this.loadResourcePackage(t).then(function(){var o=e.visuals.plugins[t.name];o?(o.iconUrl=r.getIconUrl(t),i.resolve(o)):i.reject("Unable to load visual plugin from resource package")}).catch(function(){i.reject("failed to resolve all promises")}):i.resolve(null),i.promise},r.prototype.destroy=function(){},r.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.getIconUrl=function(e){var t="#css-"+e.name,r=$(t)[0],i=_.find(document.styleSheets,function(e){return e.ownerNode===r});if(!i)return"";for(var o=0,n=i.cssRules;o<n.length;o++){var a=n[o],s=a;if(s.selectorText&&s.selectorText===".visual-icon."+e.name)return s.style.backgroundImage}return""},r.prototype.loadCustomVisualResourcePackageItem=function(t,r){switch(t.type){case e.contracts.ResourcePackageItemType.CustomVisualJavascript:return this.loadCustomVisualJS(r.id,r.name,t);case e.contracts.ResourcePackageItemType.CustomVisualsCss:return this.loadCustomVisualCss(r.id,r.name,t);case e.contracts.ResourcePackageItemType.CustomVisualMetadata:return this.loadCustomVisualMetadata(r.id,r.name,t)}},r.prototype.loadCustomVisualJS=function(e,r,i){var o=this,n=this.promiseFactory.defer();return i.content?(t.resourceInjector.injectJsCode(r,i.content),n.resolve(i.content)):this.provider.get(e,r,i.path,{retries:1}).then(function(e){t.resourceInjector.injectJsCode(r,e),i.content=e,o.transformPlugin(r).then(function(){return n.resolve(e)},function(e){return n.reject(e)})}).catch(function(e){n.reject(e)}),n.promise},r.prototype.transformPlugin=function(t){var r=e.visuals.plugins[t];return r?(e.extensibility.visualPluginAdapter.transformPlugin(r),this.promiseFactory.resolve()):this.promiseFactory.reject("Unable to load visual plugin from resource package: "+t)},r.prototype.loadCustomVisualCss=function(e,r,i){var o=this.promiseFactory.defer();return i.content?(t.resourceInjector.injectCssCode(r,i.content),o.resolve(i.content)):this.provider.get(e,r,i.path,{retries:1}).then(function(e){t.resourceInjector.injectCssCode(r,e),i.content=e,o.resolve(e)}).catch(function(e){o.reject(e)}),o.promise},r.prototype.loadCustomVisualMetadata=function(e,t,r){var i=this,o=this.promiseFactory.defer();try{r.content?o.resolve(this.createPlugin(t,r.content)):this.provider.get(e,t,r.path,{retries:1}).then(function(e){r.content=e,o.resolve(i.createPlugin(t,e))}).catch(function(e){o.reject(e)})}catch(e){o.reject(e)}return o.promise},r.prototype.createPlugin=function(t,r){var i=r;"object"!=typeof r&&(i=JSON.parse(r));var o=e.visualHost.visualPluginUtility.createVisualPlugin(i,this.locale,0);e.extensibility.visualPluginAdapter.transformPlugin(o);var n=e.visuals.plugins[o.name];return n&&!n.custom&&(o.custom=!1),n&&(o.favoriteId=n.favoriteId,o.isOutOfBox=n.isOutOfBox),e.visuals.plugins[o.name]=o,o},r.prototype.loadBlob=function(e,t,r){var i=this.promiseFactory.defer(this.telemetryV2Enabled);return r.contentBlob?i.resolve(r.contentBlob):r.promise?r.promise.then(function(e){return i.resolve(e)}):(r.promise=this.provider.getBlob(e,t,r.path,{retries:1}),r.promise.then(function(e){r.contentBlob=e,i.resolve(e)}).catch(function(e){i.reject(e)}).finally(function(){delete r.promise})),i.promise},__decorate([o(i)],r.prototype,"loadResourcePackageItem",null),r}();t.LocalResourceLoader=u}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var o=e.capabilities,n=r(e,t)||r(e,"en-US");return o&&n&&i(o,n),e}function r(e,t){var r=n(t);return e&&e.stringResources?e.stringResources[r]:null}function i(e,t){for(var r in e)if(e.hasOwnProperty(r))if("object"==typeof e[r])i(e[r],t);else if("displayNameKey"===r&&e.displayName){var n=e.displayNameKey;e.displayName=o(t,n)||e.displayName}else if("descriptionKey"===r&&e.description){var n=e.descriptionKey;e.description=o(t,n)||e.description}else if("placeHolderTextKey"===r&&e.placeHolderText){var n=e.placeHolderTextKey;e.placeHolderText=o(t,n)||e.placeHolderText}}function o(e,t){return e[t]}function n(e){var t=e;return{ar:"ar-SA",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR","en-US":"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fi:"fi-FI",fr:"fr-FR",gl:"gl-ES",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",id:"id-ID",it:"it-IT",ja:"ja-JP",kk:"kk-KZ",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ms:"ms-MY",no:"nb-NO",nl:"nl-NL",pl:"pl-PL",br:"pt-BR",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",si:"sl-SI","sr-Cyrl":"sr-Cyrl-RS","sr-Latn":"sr-Latn-RS",sv:"sv-SE",th:"th-TH",tr:"tr-TR",uk:"uk-UA",vi:"vi-VN","zh-Hans":"zh-CN","zh-Hant":"zh-TW"}[t]||t||navigator.language}e.setLocalizedCapabilities=t,e.getLocalizedResources=r,e.getLocale=n}(t=e.LocalizationResourceUtility||(e.LocalizationResourceUtility={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r,i=jsCommon.Lazy,o=e.visuals.plugins;!function(t){function r(e,t){return e?!!e.custom:!_.includes(u,t)}function n(t){return t&&t.capabilities&&t.capabilities.dataViewMappings&&!!e.ScriptResultUtil.findScriptResultMapping(t.capabilities.dataViewMappings)}function a(e,t){switch(e){case"pythonVisual":return!0;case"scriptVisual":default:return!(!t||!t.scriptVisualEnabled)}}function s(e){return!!e&&!!l.getValue()[e.name]}var u=["play","subview","smallMultiple"],l=new i(function(){var e;return e={},e[o.card.name]=!0,e[o.gauge.name]=!0,e[o.image.name]=!0,e[o.kpi.name]=!0,e[o.textbox.name]=!0,e});t.isCustomVisual=r,t.isScriptVisual=n,t.isScriptVisualQueryable=a,t.isLightWeightRenderingVisual=s}(r=t.utils||(t.utils={}));var n;!function(r){function i(t,r,i){var o=e.Prototype.inherit(t);return o.create=r,i&&i(o),o}function n(e,t,r){return i(e,t,function(e){return a(e,r)})}function a(t,r){if(r)switch(t.name){case o.scatterChart.name:t.capabilities=e.visuals.getScatterChartCapabilities(r);break;case o.areaChart.name:t.capabilities=e.visuals.getLineChartCapabilities(!1,!0,r);break;case o.lineChart.name:t.capabilities=e.visuals.getLineChartCapabilities(!1,!1,r);break;case o.stackedAreaChart.name:t.capabilities=e.visuals.getLineChartCapabilities(!0,!0,r);break;case o.waterfallChart.name:t.capabilities=e.visuals.getWaterfallChartCapabilities(r);break;case o.comboChart.name:t.capabilities=e.visuals.getComboChartCapabilities(!1);break;case o.lineStackedColumnComboChart.name:t.capabilities=e.visuals.getComboChartCapabilities(!0);break;case o.lineClusteredColumnComboChart.name:t.capabilities=e.visuals.getComboChartCapabilities(!1);break;case o.columnChart.name:case o.hundredPercentStackedColumnChart.name:t.capabilities=e.visuals.getColumnChartCapabilities(!1,!0,!1,r);break;case o.barChart.name:case o.hundredPercentStackedBarChart.name:t.capabilities=e.visuals.getColumnChartCapabilities(!0,!0,!1,r);break;case o.clusteredBarChart.name:t.capabilities=e.visuals.getColumnChartCapabilities(!0,!1,!1,r);break;case o.clusteredColumnChart.name:t.capabilities=e.visuals.getColumnChartCapabilities(!1,!1,!1,r);break;case o.pivotTable.name:t.capabilities=e.visuals.getPivotTableCapabilities(r);break;case o.filledMap.name:t.capabilities=e.visuals.getFilledMapCapabilities(r);break;case o.azureMap.name:t.capabilities=e.visuals.getAzureMapCapabilities(r);break;case o.map.name:t.capabilities=e.visuals.getMapCapabilities(r);break;case o.funnel.name:t.capabilities=e.visuals.getFunnelChartCapabilities(r);break;case o.shapeMap.name:t.capabilities=e.visuals.getShapeMapCapabilities();break;case o.treemap.name:t.capabilities=e.visuals.getTreemapCapabilities(r);break;case o.slicer.name:t.capabilities=e.visuals.getSlicerCapabilities(r);break;case o.keyDriversVisual.name:t.capabilities=e.visuals.getKeyDriversCapabilities(r);break;case o.decompositionTreeVisual.name:t.capabilities=e.visuals.getDecompositionTreeCapabilities(r),r.decompositionTreeCoreVisual&&(t.create=function(e){return new e.module.DecompositionTree((void 0))},t.module={javascript:"DecompositionTreeVisual/decompositionTree"})}}function s(e){var t="#css-"+e,r=$(t)[0],i=_.find(document.styleSheets,function(e){return e.ownerNode===r});if(i&&i.cssRules)for(var o=0,n=i.cssRules;o<n.length;o++){var a=n[o];if(a.selectorText&&a.selectorText===".visual-icon."+e)return a.style.backgroundImage}return""}function u(t,r,i,o,n){var a=r.getPlugin(t);return a&&a.module?i.require(a.module).then(function(){return a},function(){return null}):n?e.PbiPromise.resolve(a):o.resolve(a)}r.getPluginCopyWithFeatureSwitches=n,r.applyFeatureSwitches=a,r.getPluginIconUrl=s,r.ensurePlugin=u;var l=function(){function e(){this.visualPlugins={},this.loadedVisualPlugins={}}return e.prototype.getLoadedPlugins=function(){return _.map(this.loadedVisualPlugins,function(e){return e})},e.prototype.getLoadedPlugin=function(e){return this.loadedVisualPlugins[e]},e.prototype.hasPlugin=function(e){return!!this.visualPlugins[e]},e.prototype.loadPlugin=function(e,t){if(t){var r=this.visualPlugins[e];null!=r&&r.custom!==!0||(this.visualPlugins[e]=t)}this.loadedVisualPlugins[e]=this.visualPlugins[e]},e.prototype.unloadPlugin=function(e){delete this.loadedVisualPlugins[e]},e}();r.VisualPluginStorage=l,function(r){function i(r,i,o,n,a,s){var u=i.defer();if(n.name===t.PowerAppsVisual)return u.resolve(null),u.promise;if(!a&&r.hasPlugin(n.name))r.loadPlugin(n.name),u.resolve(null);else if(!a&&e.visuals.plugins[n.name])r.loadPlugin(n.name,e.visuals.plugins[n.name]),u.resolve(null);else if(_.isEmpty(n.items))u.reject("Resource package does not contain any items");else{var l;s&&(l=s.startEvent(e.telemetry.ApproveResourceLoadResourcePackage,n.name)),o.loadResourcePackage(n).catch(function(e){}).finally(function(){var i=e.visuals.plugins[n.name];i?(i.iconUrl||(i.iconUrl=t.visualPluginServiceHelpers.getPluginIconUrl(n.name)),r.loadPlugin(i.name,i),u.resolve(null),l&&l.resolve()):(u.reject("Unable to load visual plugin from resource package"),l&&l.reject())})}return u.promise}function o(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];e.loadPlugin(o.name,o)}}r.ensurePlugin=i,r.ensureTrustedVisualPlugins=o}(l=r.VisualPluginStorage||(r.VisualPluginStorage={}))}(n=t.visualPluginServiceHelpers||(t.visualPluginServiceHelpers={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,i){return new a(e,t,r,i)}function i(r,i,o,n,a){i=i?_.clone(i):{};var s=i.touchScreenOptimizedTooltips;switch(r){case e.visuals.plugins.areaChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.areaChart,function(e){return e.module.createCartesianChart({chartType:1,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.barChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.barChart,function(e){return e.module.createCartesianChart({chartType:6,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.clusteredBarChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.clusteredBarChart,function(e){return e.module.createCartesianChart({chartType:5,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.clusteredColumnChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.clusteredColumnChart,function(e){return e.module.createCartesianChart({chartType:3,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.columnChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.columnChart,function(e){return e.module.createCartesianChart({chartType:4,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.comboChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.comboChart,function(e){return e.module.createCartesianChart({chartType:11,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.dataDotChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.dataDotChart,function(e){return e.module.createCartesianChart({chartType:12,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.dataDotClusteredColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.dataDotClusteredColumnComboChart,function(e){return e.module.createCartesianChart({chartType:16,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.dataDotStackedColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.dataDotStackedColumnComboChart,function(e){return e.module.createCartesianChart({chartType:17,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.hundredPercentStackedBarChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.hundredPercentStackedBarChart,function(e){return e.module.createCartesianChart({chartType:7,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.hundredPercentStackedColumnChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.hundredPercentStackedColumnChart,function(e){return e.module.createCartesianChart({chartType:8,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.stackedAreaChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.stackedAreaChart,function(e){return e.module.createCartesianChart({chartType:2,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.waterfallChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.waterfallChart,function(e){return e.module.createCartesianChart({chartType:13,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s,featureSwitches:i})},i);case e.visuals.plugins.realTimeLineChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.realTimeLineChart,function(e){var t=e.module;return t.createCartesianChart({chartType:18,animator:t.createRealTimeLineChartAnimator(),animateCategoryAxis:!0,animateValueAxis:!0,tooltipsEnabled:s})},i);case e.visuals.plugins.lineChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.lineChart,function(e){return e.module.createCartesianChart({chartType:0,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.lineClusteredColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.lineClusteredColumnComboChart,function(e){return e.module.createCartesianChart({chartType:14,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.lineStackedColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.lineStackedColumnComboChart,function(e){return e.module.createCartesianChart({chartType:15,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.scatterChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.scatterChart,function(e){var t=e.module;return t.createCartesianChart({chartType:10,behavior:t.createCartesianChartBehavior([t.createScatterChartMobileBehavior()]),tooltipsEnabled:s,featureSwitches:i})},i);case e.visuals.plugins.gauge.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.gauge,function(e){return e.module.createGauge({gaugeSmallViewPortProperties:a.gaugeSmallViewPortProperties,tooltipsEnabled:s},i)},i);case e.visuals.plugins.funnel.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.funnel,function(){return new e.visuals.FunnelChart({animator:null,funnelSmallViewPortProperties:a.funnelSmallViewPortProperties,tooltipsEnabled:s})},i);case e.visuals.plugins.donutChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.donutChart,function(){return new e.visuals.DonutChart({disableGeometricCulling:!0,smallViewPortProperties:a.donutSmallViewPortProperties,tooltipsEnabled:s})},i);case e.visuals.plugins.pieChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.pieChart,function(){return new e.visuals.DonutChart({sliceWidthRatio:0,disableGeometricCulling:!0,smallViewPortProperties:a.donutSmallViewPortProperties,tooltipsEnabled:s})},i);case e.visuals.plugins.ribbonChart.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.ribbonChart,function(e){return e.module.createCartesianChart({chartType:9,trimOrdinalDataOnOverflow:o,tooltipsEnabled:s})},i);case e.visuals.plugins.matrix.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.matrix,function(){return new e.visuals.Matrix},i);case e.visuals.plugins.table.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.table,function(){return new e.visuals.Table},i);case e.visuals.plugins.pivotTable.name:var u=e.visuals.PivotTableOptions.createMobileConstructorOptions();return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.pivotTable,function(){return new e.visuals.PivotTable(u,i)},i);case e.visuals.plugins.tableEx.name:var l=e.visuals.TableExOptions.createMobileConstructorOptions();return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.tableEx,function(){return new e.visuals.TableEx(l,i)},i);case e.visuals.plugins.map.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.map,function(){return new e.visuals.Map({viewChangeThrottleInterval:n,enableCurrentLocation:!!i&&i.mapCurrentLocationEnabled,tooltipsEnabled:s})},i);case e.visuals.plugins.filledMap.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.filledMap,function(){
return new e.visuals.Map({filledMap:!0,viewChangeThrottleInterval:n,tooltipsEnabled:s})},i);case e.visuals.plugins.azureMap.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.azureMap,function(){return new e.visuals.AzureMap({tooltipsEnabled:s})},i);case e.visuals.plugins.card.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.card,function(e){return e.module.createCard({cardSmallViewportProperties:a.cardSmallViewportProperties,tooltipsEnabled:s,featureSwitches:i})},i);case e.visuals.plugins.textbox.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.textbox,function(e){var t=e.module;return t.createTextbox({viewModelAdapter:t.createAlwaysUseSmallViewportTextboxViewModelAdapter(),featureSwitches:i})},i);case e.visuals.plugins.slicer.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.slicer,function(){return new e.visuals.Slicer({featureSwitches:i})},i);case e.visuals.plugins.kpi.name:return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.kpi,function(){return new e.visuals.KPIStatusWithHistory({interactivityEnabled:!0},i)},i);default:return e.Prototype.inherit(e.visuals.plugins[r])}}var o=e.visualHost.utils.ResourcePackageUtils,n=t.visualPluginServiceHelpers.VisualPluginStorage;t.createMobileVisualPluginService=r;var a=function(){function r(t,o,a,s){var u=this;this.promiseFactory=t,this.resourceLoader=o;var l=a||{gaugeSmallViewPortProperties:{hideGaugeSideNumbersOnSmallViewPort:!0,smallGaugeMarginsOnSmallViewPort:!0,MinHeightGaugeSideNumbersVisible:r.MinHeightGaugeSideNumbersVisible,GaugeMarginsOnSmallViewPort:r.GaugeMarginsOnSmallViewPort},funnelSmallViewPortProperties:{hideFunnelCategoryLabelsOnSmallViewPort:!0,minHeightFunnelCategoryLabelsVisible:r.MinHeightFunnelCategoryLabelsVisible},donutSmallViewPortProperties:{maxHeightToScaleDonutLegend:r.MaxHeightToScaleDonutLegend},cardSmallViewportProperties:null};e.visuals.TooltipManager.ShowTooltips=!1;var c=!1,p=this.getMapThrottleInterval();if(this.storage=new n,s)this.initBuiltInPlugins=s().then(function(t){u.featureSwitches=t;for(var r in e.visuals.plugins)u.storage.loadPlugin(r,i(r,t,c,p,l));e.visuals.TooltipManager.ShowTooltips=u.featureSwitches&&u.featureSwitches.touchScreenOptimizedTooltips,e.visuals.TooltipManager.ShowTouchScreenOptimizedTooltips=u.featureSwitches&&u.featureSwitches.touchScreenOptimizedTooltips});else{for(var d in e.visuals.plugins)this.storage.loadPlugin(d,i(d,void 0,c,p,l));this.initBuiltInPlugins=t.resolve(null)}}return r.prototype.getVisuals=function(){return this.storage.getLoadedPlugins()},r.prototype.getPlugin=function(e){return this.storage.getLoadedPlugin(e)},r.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},r.prototype.ensureBuiltInPlugins=function(){return this.initBuiltInPlugins},r.prototype.ensurePlugins=function(e){var t=[];if(e&&e.length)for(var r=0,i=e;r<i.length;r++){var n=i[r];o.isCustomVisualResourcePackage(n)&&t.push(this.ensurePlugin(n))}return this.promiseFactory.allSettled(t)},r.prototype.ensurePlugin=function(e){return n.ensurePlugin(this.storage,this.promiseFactory,this.resourceLoader,e)},r.prototype.ensureTrustedVisualPlugins=function(e){n.ensureTrustedVisualPlugins(this.storage,e)},r.prototype.requireSandbox=function(e){return t.utils.isCustomVisual(e)},r.prototype.isCustomVisual=function(e){return t.utils.isCustomVisual(this.getPlugin(e),e)},r.prototype.isScriptVisual=function(e){return t.utils.isScriptVisual(this.getPlugin(e))},r.prototype.isScriptVisualQueryable=function(e){return t.utils.isScriptVisualQueryable(e,this.featureSwitches)},r.prototype.isLightWeightRenderingVisual=function(e){return t.utils.isLightWeightRenderingVisual(this.getPlugin(e))},r.prototype.getMapThrottleInterval=function(){if(navigator.userAgent.toLowerCase().indexOf("windows phone")!==-1)return 100},r.prototype.getInteractivityOptions=function(e){return{overflow:this.getMobileOverflowString(e),isInteractiveLegend:this.isChartSupportInteractivity(e),selection:!0,isVisualInteractive:!0}},r.prototype.getTelemetryHostInformation=function(){return{name:"MobileTileHost"}},r.prototype.getMobileOverflowString=function(e){switch(e){case"multiRowCard":return"visible";default:return"hidden"}},r.prototype.isChartSupportInteractivity=function(e){switch(e){case"areaChart":case"barChart":case"clusteredBarChart":case"clusteredColumnChart":case"columnChart":case"donutChart":case"hundredPercentStackedBarChart":case"hundredPercentStackedColumnChart":case"lineChart":case"pieChart":case"scatterChart":case"table":case"matrix":case"multiRowCard":return!0;default:return!1}},r.prototype.getStorage=function(){return this.storage},r.MinHeightGaugeSideNumbersVisible=80,r.GaugeMarginsOnSmallViewPort=10,r.MinHeightFunnelCategoryLabelsVisible=80,r.MaxHeightToScaleDonutLegend=300,r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,r=jsCommon.Version;!function(t){function i(e,t,i,o){void 0===i&&(i=!1),void 0===o&&(o=null);var n={major:1,minor:8,patch:0},a=document.createElement("script");i?o&&r.gt(o,n)||r.eq(o,n)?a.innerHTML=l(t):a.innerHTML=u(t):a.innerHTML=t,a.id="js-"+e,a.setAttribute("name",e),document.body.appendChild(a)}function o(e,t){var r=$("<style/>",{html:t,id:"css-"+e});r.attr("name",e),$("head").append(r)}function n(t,r,i){var o=t.defer();return $.ajax({url:i,dataType:"script",cache:!0,success:function(){return o.resolve(null)},error:function(e,t,r){return o.reject(r)},timeout:e.resourceLoaderHttpTimeout}),o.promise}function a(t,r,i){var o=t.defer(),n=setTimeout(function(){return o.reject("Timeout")},e.resourceLoaderHttpTimeout);return $("<link>",{id:"css-"+r,type:"text/css",rel:"stylesheet",href:i,crossorigin:"anonymous"}).on("load",function(e){clearTimeout(n),o.resolve(null)}).on("error",function(e){clearTimeout(n),o.reject(e)}).appendTo($("head")),o.promise}function s(e){var t="#css-"+e,r=$(t)[0],i=_.find(document.styleSheets,function(e){return e.ownerNode===r});if(i&&i.cssRules)for(var o=0,n=i.cssRules;o<n.length;o++){var a=n[o];if(a.selectorText&&_.includes(a.selectorText,e))return a.style.backgroundImage}return""}function u(e){return"\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    "+e+";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                    Object.defineProperty(newWindow, key, {\n                                        get: (function(item) {\n                                            return function() {\n                                                return item;\n                                            }\n                                        })(item),\n                                        set: function() { }\n                                    });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            "}function l(e){return"\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    "+e+";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                \t\tif (key ===\"window\" || key === \"self\"){\n                                            Object.defineProperty(newWindow, key, {\n                                                get: (function(newWindow) {\n                                                    return function() {\n                                                        return newWindow;\n                                                    }\n                                                })(newWindow),\n                                                set: function() { }\n                                        });\n                                    } else {\n                                        Object.defineProperty(newWindow, key, {\n                                            get: (function(item) {\n                                                return function() {\n                                                    return item;\n                                                }\n                                            })(item),\n                                            set: function() { }\n                                        });\n                                    }\n                                } else if (typeof item === 'number' || typeof item === 'boolean' || typeof item === 'string') {\n                                      Object.defineProperty(newWindow, key, {\n                                          get: (function(w, keyString) {\n                                              return function() {\n                                                  return w[keyString];\n                                              }\n                                          })(w, key.toString()),\n                                          set: (function(w, keyString) {\n                                              return function(newValue) {\n                                                  w[keyString] = newValue;\n                                              }\n                                          })(w, key.toString())\n                                      });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            "}t.injectJsCode=i,t.injectCssCode=o,t.injectJsUrl=n,t.injectCssUrl=a,t.getInjectedIconUrl=s}(t=e.resourceInjector||(e.resourceInjector={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(){return new i}var r=e.utils.ResourcePackageUtils;e.createResourcePackagesService=t;var i=function(){function t(){this.resourcePackageNameIdLookupTable={},this.packages=[{id:void 0,name:e.ResourcePackageName.SharedResources,type:2,items:[]}]}return t.prototype.getAllPackages=function(){return this.packages},t.prototype.registerPackages=function(e){if(e)for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.items&&0!==o.items.length&&(3!==o.type||!o.disabled)){this.resourcePackageNameIdLookupTable[o.id]=o.name;var n=r.findResourcePackage(this.packages,o.type,o.name);if(n)r.isStaticResource(o)?r.mergeStaticResourcePackages(n,o):_.merge(n,o);else{var a=_.clone(o);a.items=_.clone(o.items),this.packages.push(a)}}}},t.prototype.getPackage=function(e){return _.find(this.packages,function(t){return t.name===e})},t.prototype.delete=function(e){_.remove(this.packages,function(t){return t.name===e})},t.prototype.getPackageById=function(e){var t=this.resourcePackageNameIdLookupTable[e];return t&&this.getPackage(t)},t.prototype.clear=function(){this.packages=[],this.resourcePackageNameIdLookupTable={}},t}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,i,o){return new n(e,t,r,i,o)}var i=e.contracts.ResourcePackageItemType;e.visualHost.utils.ResourcePackageUtils;t.createSandboxResourceLoader=r;var o;!function(e){e.loadResourcePackage="loadResourcePackage",e.loadVisualPlugin="loadVisualPlugin",e.loadVisualPluginWithContent="loadVisualPluginWithContent",e.onVisualPluginLoad="onVisualPluginLoad",e.onResourcePackageLoad="onResourcePackageLoad",e.onVisualPluginLoadError="onVisualPluginLoadError",e.onResourcePackageLoadError="onResourcePackageLoadError"}(o||(o={}));var n=function(r){function n(e,t,i,o,n){var a=r.call(this,e,o,null)||this;return a.approvedResourceService=n,a.locale=e&&e.locale,a.promiseFactory=e.promiseFactory,a.messageProxy=t,a.sandboxLoaderUri=i,a.provider=o,a.initIFrame(),a}return __extends(n,r),n.prototype.loadResourcePackage=function(e,t){return this.loadVisualPlugin(e,t)},n.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},n.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},n.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},n.prototype.loadVisualPlugin=function(r,i){var n=this,a=this.promiseFactory.defer();return this.loadResourcesContent(r).then(function(s){if(!s||_.isEmpty(s))return void a.resolve(null);var u=_.keyBy(s,"type"),l=u[e.contracts.ResourcePackageItemType.CustomVisualMetadata];if(l)try{var c=jsCommon.JsonExtensions.tryParseJSON(l.content),p=t.visualPluginUtility.createVisualPlugin(c,n.locale,i?1:0);e.extensibility.visualPluginAdapter.transformPlugin(p);var d=e.visuals.plugins[p.name];d&&(p.favoriteId=d.favoriteId,p.isOutOfBox=d.isOutOfBox),e.visuals.plugins[p.name]=p,a.resolve(p)}catch(e){a.reject(e)}else{var v={pluginName:r.name,mappedPluginContent:u},h={eventName:o.loadVisualPluginWithContent,arguments:[v]};n.messageProxy.postMessageAsync(h).then(function(t){var r=t,i=e.visuals.plugins[r.name];if(!i||i.custom){r.custom=!0;var o=r.capabilities.objects;r.capabilities.objects=e.data.services.DataViewObjectDescriptorSerializer.deserialize(o),e.extensibility.visualPluginAdapter.transformPlugin(r),n.approvedResourceService&&n.approvedResourceService.isApprovedVisualsDefined()&&(r.isDeprecated=!0),e.visuals.plugins[r.name]=r,a.resolve(r)}}).catch(function(e){a.reject(e)})}}).catch(function(e){a.reject(e)}),a.promise},n.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},n.prototype.destroy=function(){this.iframe.remove(),this.iframe=null,this.messageProxy.destroy(),this.messageProxy=null,this.contentWindow=null},n.prototype.initIFrame=function(){var e=this,t=this.sandboxLoaderUri;jsCommon.QueryStringUtil.getQueryStringValue("unmin")&&(t+="?unmin=1"),this.iframe=$('<iframe class="sandbox-resource-loader ng-hide" sandbox="allow-scripts"></iframe>').attr("src",t).one("load",function(){return e.onIFrameLoad()}).appendTo(document.body)},n.prototype.onIFrameLoad=function(){this.contentWindow=this.iframe[0].contentWindow,this.messageProxy.contentWindow=this.contentWindow,this.messageProxy.flushQueue()},n.prototype.loadResourcesContent=function(e){for(var t=[],r=e.id,o=e.name,n=0,a=e.items;n<a.length;n++){var s=a[n];s.type!==i.CustomVisualIcon&&t.push(this.loadResourceContent(r,o,s,e))}return this.promiseFactory.all(t)},n.prototype.loadResourceContent=function(e,r,i,o){var n=this,a=this.promiseFactory.defer();return i.content?a.resolve(this.getItemContent(i.content,i)):this.provider.get(e,r,i.path).then(function(e){e?a.resolve(n.getItemContent(e,i)):t.ResourcePackageReferenceResolver.loadAndResolveContent(o,i.name,n,n.promiseFactory).then(function(e){a.resolve(n.getItemContent(e,i))})}).catch(function(e){a.reject(e)}),a.promise},n.prototype.getItemContent=function(e,t){var r=_.isString(e)?e:JSON.stringify(e);return t.content=t.type===i.CustomVisualMetadata?r:void 0,{type:t.type,content:r}},n}(t.LocalResourceLoader);t.SandboxResourceLoader=n}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t,i,o,n,a){return new r(e,t,o,n,i,a)}e.createOrganizationalStoreResourceLoader=t;var r=function(t){function r(e,r,i,o,n,a){var s=t.call(this,e,r,i,o)||this;return s.resourcePackagesService=n,s.resourcePackageResolver=a,s.resourcePackagesService.getAllPackages(),s}return __extends(r,t),r.prototype.loadResourcePackage=function(r){var i=this;if(r)return this.resourcePackageResolver(r).then(function(o){var n=[];if(o&&o.items&&!o.disabled)for(var a,s=function(t){a=e.ResourcePackageReferenceResolver.loadAndResolveContent(o,t.name,i,i.promiseFactory).then(function(e){t.content=e}),n.push(a)},u=0,l=o.items;u<l.length;u++){var c=l[u];s(c)}else if(!o||o.disabled)return i.resourcePackagesService.delete(r.name),null;return i.promiseFactory.all(n).then(function(){return t.prototype.loadResourcePackage.call(i,o,!0)})}).catch(function(){return i.resourcePackagesService.delete(r.name),null})},r}(e.SandboxResourceLoader)}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e){this.promiseFactory=e,this.promiseFactory=e}return e.prototype.loadResourcePackage=function(e){return this.promiseFactory.resolve()},e.prototype.loadResourcePackages=function(e){return this.promiseFactory.resolve()},e.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.resolve()},e.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.resolve()},e.prototype.loadSharedResource=function(e){return this.promiseFactory.resolve()},e.prototype.loadVisualPlugin=function(e){return this.promiseFactory.resolve(null)},e.prototype.loadVisualPlugins=function(e){return this.promiseFactory.resolve()},e.prototype.destroy=function(){},e}();e.UnapprovedResourceLoader=t}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){var r,i=e.data.services.DataViewObjectSerializer,o=e.data.services.SemanticQuerySerializer;!function(t){function r(e){return 0===e.length?[]:_.map(e,u)}function n(e){return 0===e.length?[]:_.map(e,l)}function a(t,r){return _.map(t,function(t){return{displayName:e.data.getDisplayName(t.displayName,r)}})}function s(t){return _.map(t,function(t){return{displayName:e.data.createDisplayNameGetter(t.displayName)}})}function u(e){return{objectName:e.objectName,displayName:e.displayName,properties:c(e.properties),selector:i.serializeSelector(e.selector),altConstantValueSelector:i.serializeSelector(e.altConstantValueSelector),validValues:e.validValues,containerIdx:e.containerIdx}}function l(e){return{objectName:e.objectName,displayName:e.displayName,properties:p(e.properties),selector:i.deserializeSelector(e.selector),altConstantValueSelector:i.deserializeSelector(e.altConstantValueSelector),validValues:e.validValues,containerIdx:e.containerIdx}}function c(e){var t={};for(var r in e)t[r]=d(e[r]);return t}function p(e){var t={};for(var r in e)t[r]=v(e[r]);return t}function d(t){return t instanceof e.data.SemanticFilter?o.serializeFilter(t):void 0===t?null:t}function v(e){var t=e;return t&&t.From&&t.Where?o.deserializeFilter(t):e}t.serialize=r,t.deserialize=n,t.serializeContainers=a,t.deserializeContainers=s}(r=t.VisualObjectInstanceSerializer||(t.VisualObjectInstanceSerializer={}))}(r=t.services||(t.services={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){var r,i=e.data.services.DataViewObjectSerializer;!function(e){function t(e){return _.isEmpty(e)?[]:_.map(e,o)}function r(e){return _.isEmpty(e)?[]:_.map(e,n)}function o(e){var t={selector:i.serializeSelector(e.selector),altStaticSelector:i.serializeSelector(e.altStaticSelector),objects:e.objects};return void 0!==e.allowOverrideSubtotalMatching&&(t.allowOverrideSubtotalMatching=e.allowOverrideSubtotalMatching),t}function n(e){var t={selector:i.deserializeSelector(e.selector),altStaticSelector:i.deserializeSelector(e.altStaticSelector),objects:e.objects};return void 0!==e.allowOverrideSubtotalMatching&&(t.allowOverrideSubtotalMatching=e.allowOverrideSubtotalMatching),t}e.serialize=t,e.deserialize=r}(r=t.VisualObjectRepetitionSerializer||(t.VisualObjectRepetitionSerializer={}))}(r=t.services||(t.services={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(e){return{colorPalette:o(e.colorPalette),isHighContrast:e.isHighContrast,icons:e.icons}}function i(e){return{colorPalette:n(e.colorPalette),isHighContrast:e.isHighContrast,icons:e.icons}}function o(e){return{dataColors:a(e.dataColors),foreground:e.foreground,foregroundLight:e.foregroundLight,foregroundDark:e.foregroundDark,foregroundNeutralLight:e.foregroundNeutralLight,foregroundNeutralDark:e.foregroundNeutralDark,foregroundNeutralSecondary:e.foregroundNeutralSecondary,foregroundNeutralSecondaryAlt:e.foregroundNeutralSecondaryAlt,foregroundNeutralSecondaryAlt2:e.foregroundNeutralSecondaryAlt2,foregroundNeutralTertiary:e.foregroundNeutralTertiary,foregroundNeutralTertiaryAlt:e.foregroundNeutralTertiaryAlt,foregroundSelected:e.foregroundSelected,foregroundButton:e.foregroundButton,background:e.background,backgroundLight:e.backgroundLight,backgroundNeutral:e.backgroundNeutral,backgroundDark:e.backgroundDark,hyperlink:e.hyperlink,tableAccent:e.tableAccent,visitedHyperlink:e.visitedHyperlink,mapPushpin:e.mapPushpin,shapeStroke:e.shapeStroke,disabledText:e.disabledText,selection:e.selection,separator:e.separator}}function n(e){return{dataColors:s(e.dataColors),foreground:e.foreground,foregroundLight:e.foregroundLight,foregroundDark:e.foregroundDark,foregroundNeutralLight:e.foregroundNeutralLight,foregroundNeutralDark:e.foregroundNeutralDark,foregroundNeutralSecondary:e.foregroundNeutralSecondary,foregroundNeutralSecondaryAlt:e.foregroundNeutralSecondaryAlt,foregroundNeutralSecondaryAlt2:e.foregroundNeutralSecondaryAlt2,foregroundNeutralTertiary:e.foregroundNeutralTertiary,foregroundNeutralTertiaryAlt:e.foregroundNeutralTertiaryAlt,foregroundSelected:e.foregroundSelected,foregroundButton:e.foregroundButton,background:e.background,backgroundLight:e.backgroundLight,backgroundNeutral:e.backgroundNeutral,backgroundDark:e.backgroundDark,hyperlink:e.hyperlink,visitedHyperlink:e.visitedHyperlink,mapPushpin:e.mapPushpin,shapeStroke:e.shapeStroke,disabledText:e.disabledText,tableAccent:e.tableAccent,selection:e.selection,separator:e.separator}}function a(e){return{colors:e.getAllColors(),sentimentColors:e.getSentimentColors(),gradientColors:e.getGradientColors()}}function s(t){return new e.visuals.DataColorPalette(t.colors,t.sentimentColors,t.gradientColors)}t.serializeVisualStyle=r,t.deserializeVisualStyle=i,t.serializeColorPalette=o,t.deserializeColorPalette=n,t.serializeDataColors=a,t.deserializeDataColors=s}(r=t.VisualStyleSerializer||(t.VisualStyleSerializer={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t){return new o(e,t)}var i;!function(e){e[e.NotRequired=0]="NotRequired",e[e.Declined=1]="Declined",e[e.Approved=2]="Approved"}(i=t.UserConsent||(t.UserConsent={})),t.createVisualConsentService=r;var o=function(){function t(e,t){this.promiseFactory=e,this.telemetryService=t,this.cachedConsentMap={},this.visualConsentOptionsMap={}}return t.prototype.registerVisualConsent=function(t,r){this.visualConsentOptionsMap[t]=r,this.telemetryService.logEvent(e.telemetry.VisualConsentRegister,t,this.telemetryService.root.id,!1,"PowerBI"),this.loadConsentAsync(t)},t.prototype.hasConsent=function(e){return this.cachedConsentMap[e]},t.prototype.setConsent=function(t,r){if(!this.isConsentRequiringVisual(t))return this.promiseFactory.reject("Visual type does not require consent");this.cachedConsentMap[t]=r;var i=this.visualConsentOptionsMap[t]&&this.visualConsentOptionsMap[t].consentPersistencyProvider;return this.telemetryService.logEvent(e.telemetry.VisualConsentSet,t,r,this.telemetryService.root.id,!1,"PowerBI"),i?i.saveConsent(r):this.promiseFactory.reject("No persistencyProvider was set for visual "+t)},t.prototype.getConsent=function(t){var r=this,o=[];t=_.uniq(t),this.telemetryService.logEvent(e.telemetry.VisualConsentGet,t.join(", "),this.telemetryService.root.id,!1,"PowerBI");for(var n=function(e){if(!a.isConsentRequiringVisual(e)){var t={visualType:e,consent:i.NotRequired};return o.push(a.promiseFactory.resolve(t)),"continue"}o.push(a.loadConsentAsync(e).then(function(t){if(t){var o={visualType:e,consent:i.Approved};return r.promiseFactory.resolve(o)}return r.showConsentDialog(e)}))},a=this,s=0,u=t;s<u.length;s++){n(u[s])}return this.promiseFactory.allSettled(o).then(function(e){return _.map(_.filter(e,function(e){return 0===e.type}),function(e){return e.value})})},t.prototype.isConsentRequiringVisual=function(e){return!!this.visualConsentOptionsMap[e]},t.prototype.loadConsentAsync=function(e){var t=this;if(void 0!==this.cachedConsentMap[e])return this.promiseFactory.resolve(this.cachedConsentMap[e]);var r=this.visualConsentOptionsMap[e]&&this.visualConsentOptionsMap[e].consentPersistencyProvider;return r?r.loadConsent().then(function(r){return t.cachedConsentMap[e]=r,t.promiseFactory.resolve(r)}).catch(function(e){return t.promiseFactory.reject(e)}):this.promiseFactory.reject("VisualConsentService.getConsentAsync: Missing consentPersistencyProvider for visual "+e)},t.prototype.showConsentDialog=function(e){var t=this;if(!this.isConsentRequiringVisual(e))return this.promiseFactory.reject("VisualConsentService.showConsentDialog: Visual type does not require consent");var r=this.visualConsentOptionsMap[e]&&this.visualConsentOptionsMap[e].consentDialogProvider;return r?r.showConsentDialog().then(function(r){t.setConsent(e,r);var o={visualType:e,consent:r?i.Approved:i.Declined};return t.promiseFactory.resolve(o)}).catch(function(e){return t.promiseFactory.reject(e)}):this.promiseFactory.reject("VisualConsentService.showConsentDialog: Missing consentDialogProvider for visual "+e)},t}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(){return new r}e.createVisualInstanceIdTrackingService=t;var r=function(){function e(){this.listeners=[]}return e.prototype.associate=function(e,t){for(var r=0,i=this.listeners;r<i.length;r++){i[r].onInstanceAssociated(e,t)}},e.prototype.subscribeToInstanceIdAssociation=function(e){_.includes(this.listeners,e)||this.listeners.push(e)},e}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(){return new i}t.createVisualStylePresetService=r;var i=function(){function t(){var t;this.cache=(t={},t[e.visuals.plugins.table.name]=e.visuals.stylePresets.tableStylePresets(),t[e.visuals.plugins.matrix.name]=e.visuals.stylePresets.matrixStylePresets(),t[e.visuals.plugins.pivotTable.name]=e.visuals.stylePresets.pivotTableStylePresets(),t[e.visuals.plugins.tableEx.name]=e.visuals.stylePresets.tableExStylePresets(),t)}return t.prototype.getStylePresets=function(e){return this.cache[e]},t.prototype.getStylePreset=function(t,r){var i=this.getStylePresets(t);
if(i)return e.VisualStylePresetHelpers.getStylePreset(i,r)},t.prototype.getEnumFromName=function(e){return this.getEnumFromStylePresets(this.getStylePresets(e))},t.prototype.getEnumFromStylePresets=function(t){return e.VisualStylePresetHelpers.getStylePresetsEnum(t)},t}()}(r=t.services||(t.services={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){function i(r,i,o){r=i?t.LocalizationResourceUtility.setLocalizedCapabilities(r,i):r;var n=i?t.LocalizationResourceUtility.getLocalizedResources(r,i):null,a=t.LocalizationResourceUtility.getLocalizedResources(r,"en-US"),s=n||a?{enUSStrings:a,localizedStrings:n}:null,u={name:r.visual.guid,apiVersion:r.apiVersion,class:r.visual.visualClassName,displayName:r.visual.displayName,capabilities:r.capabilities,custom:!0,iconUrl:'url("'+r.content.iconBase64+'")',content:r.content,version:r.visual.version,create:function(){return null},customizeQuery:function(e){return null},localizationResources:s,supportUrl:r.visual.supportUrl,source:o,publisher:r.author?r.author.name:void 0};return r.capabilities&&r.capabilities.subtotals&&e.visuals.CustomVisualPluginMethods.isSubtotalCustomizationCapabilityValid(r.capabilities.subtotals)&&(u.customizeQuery=function(t){return e.visuals.CustomVisualPluginMethods.customizeQueryForSubtotals(t,r.capabilities.subtotals)}),u}r.createVisualPlugin=i}(r=t.visualPluginUtility||(t.visualPluginUtility={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t){return new a(e,t)}var r,i=jsCommon.Utility;!function(e){e.WindowMessageProxyMessageEvent="message",e.WindowMessageProxyErrorEvent="error"}(r=e.events||(e.events={}));var o="message",n="onMessageProxyAsyncComplete";e.createWindowMessageProxy=t;var a=function(){function e(e,t){var r=this;this.promiseFactory=e,this._queue=[],this._allowSameWindow=!1,this.handlers={message:[],error:[]},this.isFlushing=!1,t&&(this._contentWindow=t),this.deferredCache={},this.windowMessageHandler=function(e){return r.onMessageReceived(e)},$(window).on(o,this.windowMessageHandler)}return Object.defineProperty(e.prototype,"allowSameWindow",{get:function(){return this._allowSameWindow},set:function(e){this._allowSameWindow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWindow",{get:function(){return this._contentWindow},set:function(e){this._contentWindow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queue",{get:function(){return jQuery.extend([],this._queue)},enumerable:!0,configurable:!0}),e.prototype.postMessage=function(e){this.contentWindow?this.sendMessage(e):this.queueMessage(e)},e.prototype.postMessageAsync=function(e){var t=this,r=this.promiseFactory.defer(),i=this.createRandomString();return this.deferredCache[i]=r,e.id=i,this.postMessage(e),r.promise.finally(function(){delete t.deferredCache[i]}),r.promise},e.prototype.queueMessage=function(e,t){void 0===t&&(t=this._queue.length);var r=this.prepareMessage(e);this._queue.splice(t,0,r)},e.prototype.on=function(e,t){if(this.handlers[e]){this.handlers[e].indexOf(t)>-1||this.handlers[e].push(t)}},e.prototype.off=function(e,t){if(this.handlers[e]){if(!t)return void(this.handlers[e].length=0);var r=this.handlers[e].indexOf(t);r>-1&&this.handlers[e].splice(r,1)}},e.prototype.flushQueue=function(){!this.isFlushing&&this.contentWindow&&(this.isFlushing=!0,this.contentWindow.postMessage&&this.contentWindow.postMessage(this._queue,"*"),this._queue.length=0,this.isFlushing=!1)},e.prototype.sendMessage=function(e){var t=this.prepareMessage(e);this.contentWindow&&this.contentWindow.postMessage&&this.contentWindow.postMessage(t,"*")},e.prototype.prepareMessage=function(e){var t;try{t=JSON.stringify(e)}catch(e){throw t=null,i.ensureError(e)}return t},e.prototype.onMessageReceived=function(e){if(this.allowSameWindow||e.originalEvent.source!==window){var t;try{t="string"==typeof e.originalEvent.data?JSON.parse(e.originalEvent.data):e.originalEvent.data}catch(e){t=null}if(t)for(var r=jQuery.isArray(t)?t:[t],i=0,o=r;i<o.length;i++){var n=o[i],a=void 0,s=void 0;try{"string"==typeof n?(a=JSON.parse(n),s=n.length):(a=n,s=e.originalEvent.data.length)}catch(e){a=null}if(!a)return;this.dispatchMessage(e.originalEvent,a,s)}}},e.prototype.dispatchMessage=function(e,t,r){var i={message:t,source:e.source,packedSize:r};if(t.id&&(t.eventName===n||t.result||t.error)){var o=this.deferredCache[t.id];if(!o)return;return t.error?o.reject(t.error):o.resolve(t.result)}for(var a=t.error?this.handlers.error:this.handlers.message,s=0,u=a;s<u.length;s++){var l=u[s];this.invokeHandler(l,i)}},e.prototype.invokeHandler=function(e,t){var r,i,o=this;t.message.id&&(i={id:t.message.id,eventName:n,arguments:[]});try{r=e.call(null,t),i&&this.promiseFactory.when(r).then(function(e){i.result=e,o.postMessage(i)}).catch(function(e){i.error=e,o.postMessage(i)})}catch(e){i&&(i.error={message:e.message},this.postMessage(i))}},e.prototype.createRandomString=function(){return(Math.random()+1).toString(36).substring(7)},e.prototype.destroy=function(){this.handlers.message.length=0,this.handlers.error.length=0,$(window).off(o,this.windowMessageHandler),this.windowMessageHandler=null},e}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,r,o,n,a,s){var u=new i(e,r,o,n,a),l=u;return null!=s&&(l=new t.VisualOutsideZoneAdapter(u,s)),new t.VisualSafeExecutionWrapper(l,e,o,n,u.isPluginInError)}t.visualApiVersions=[],t.createVisualApiAdapter=r;var i=function(){function r(e,t,r,i,o){this.plugin=e,this.creator=t,this.promiseFactory=r,this.telemetryService=i,this.module=o,this.isPluginInError=!1;var n=e.apiVersion,a=this.getVersionIndex(n);n?a>-1?(this.apiVersionIndex=a,this.legacy=!1):this.isPluginInError=!0:this.legacy=!0}return r.prototype.init=function(r){if(r.element.empty(),r=e.Prototype.inherit(r),this.legacy)this.visual=this.creator({module:this.module}),this.visualLegacy.init(r);else{var i=this.host=t.visualApiVersions[this.apiVersionIndex].hostAdapter(r);this.visual=this.creator({element:r.element.get(0),host:i,module:this.module}),this.overloadMethods()}},r.prototype.update=function(t){return __awaiter(this,void 0,e.Promise,function(){return __generator(this,function(r){switch(r.label){case 0:return this.plugin.systemVisual||(t=e.Prototype.inherit(t),t.visualDefinitionData=void 0,t.dataTransforms=void 0),(t.type&e.VisualUpdateType.Resize)===e.VisualUpdateType.Resize&&this.visualHasMethod("onResizing")?this.plugin.custom&&this.visualHasMethod("update")?[4,this.visualLegacy.update(t)]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:return this.onResizing(t.viewport,t.resizeMode),[3,6];case 3:return this.visualHasMethod("update")?[4,this.visualLegacy.update(t)]:[3,5];case 4:return r.sent(),[3,6];case 5:(!t.type||t.type&e.VisualUpdateType.Data)&&this.onDataChanged(_.pick(t,["dataViews","operationKind"])),t.type&e.VisualUpdateType.ViewMode&&this.onViewModeChanged(t.viewMode),r.label=6;case 6:return[2]}})})},r.prototype.destroy=function(){this.visualHasMethod("destroy")&&this.visualLegacy.destroy()},r.prototype.enumerateObjectInstances=function(e){if(this.visualHasMethod("enumerateObjectInstances"))return this.visualLegacy.enumerateObjectInstances(e)},r.prototype.enumerateObjectRepetition=function(){if(this.visualHasMethod("enumerateObjectRepetition"))return this.visualLegacy.enumerateObjectRepetition()},r.prototype.enumerateObjectInstancesAsync=function(e){return this.visualHasMethod("enumerateObjectInstancesAsync")?this.visualAdapter.enumerateObjectInstancesAsync(e):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},r.prototype.enumerateObjectRepetitionAsync=function(){return this.visualHasMethod("enumerateObjectRepetitionAsync")?this.visualAdapter.enumerateObjectRepetitionAsync():this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(r.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!0,configurable:!0}),r.prototype.onResizing=function(e,t){this.visualHasMethod("onResizing")&&this.visualLegacy.onResizing(e,t)},r.prototype.onDataChanged=function(e){this.visualHasMethod("onDataChanged")&&this.visualLegacy.onDataChanged(e)},r.prototype.onViewModeChanged=function(e){this.visualHasMethod("onViewModeChanged")&&this.visualLegacy.onViewModeChanged(e)},r.prototype.onClearSelection=function(){this.visualHasMethod("onClearSelection")&&this.visualLegacy.onClearSelection()},r.prototype.onRestoreSelection=function(e){if(this.visualHasMethod("onRestoreSelection"))return this.visualLegacy.onRestoreSelection(e)},r.prototype.canResizeTo=function(e){if(this.visualHasMethod("canResizeTo"))return this.visualLegacy.canResizeTo(e)},r.prototype.unwrap=function(){return this.visual},Object.defineProperty(r.prototype,"visualNew",{get:function(){if(!this.legacy)return this.visual},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visualLegacy",{get:function(){if(this.legacy)return this.visual},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visualAdapter",{get:function(){return this.visual},enumerable:!0,configurable:!0}),r.prototype.visualHasMethod=function(e){var t=this.legacy?this.visualLegacy:this.visualNew;return t&&_.isFunction(t[e])},r.prototype.getVersionIndex=function(e){if(e)for(var r=t.visualApiVersions.length,i=0;i<r;i++)if(t.visualApiVersions[i].version===e)return i;return-1},r.prototype.overloadMethods=function(){var e=this.getCompiledOverloads();for(var t in e)this[t]=e[t]},r.prototype.getCompiledOverloads=function(){for(var e={},r=this.apiVersionIndex,i=this.visualNew,o=0;o<=r;o++){var n=t.visualApiVersions[o].overloads;_.isFunction(n)&&_.assign(e,n(i,this.host))}return e},r}();t.VisualApiAdapter=i}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e,t){this.wrappedVisual=e,this.ngZone=t}return e.prototype.init=function(e){this.executeOutsideAngularZone(this.wrappedVisual.init,e)},e.prototype.update=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.update,e)},e.prototype.destroy=function(){this.executeOutsideAngularZone(this.wrappedVisual.destroy)},e.prototype.onResizing=function(e,t){this.executeOutsideAngularZone(this.wrappedVisual.onResizing,e,t)},e.prototype.onDataChanged=function(e){this.executeOutsideAngularZone(this.wrappedVisual.onDataChanged,e)},e.prototype.onViewModeChanged=function(e){this.executeOutsideAngularZone(this.wrappedVisual.onViewModeChanged,e)},e.prototype.onClearSelection=function(){this.executeOutsideAngularZone(this.wrappedVisual.onClearSelection)},e.prototype.onRestoreSelection=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.onRestoreSelection,e)},e.prototype.canResizeTo=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.canResizeTo,e)},e.prototype.enumerateObjectInstances=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectInstances,e)},e.prototype.enumerateObjectInstancesAsync=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectInstancesAsync,e)},e.prototype.enumerateObjectRepetition=function(){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectRepetition)},e.prototype.enumerateObjectRepetitionAsync=function(){return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectRepetitionAsync)},e.prototype.visualHasMethod=function(e){return this.executeOutsideAngularZone(this.wrappedVisual.visualHasMethod,e)},e.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},e.prototype.executeOutsideAngularZone=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.wrappedVisual;return this.ngZone.runOutsideAngular(function(){return e.apply(i,t)})},e}();e.VisualOutsideZoneAdapter=t}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(e){e.apiVersion?i(e):l(e)}function i(e){o(e.capabilities)}function o(e){e&&(n(e.objects),a(e.dataRoles),s(e.dataViewMappings))}function n(t){for(var r in t){var i=t[r];if(i){var o=i.properties;if(o)for(var n in o){var a=o[n];if(a){var s=a.type;s&&s.enumeration&&(s.enumeration=e.createEnumType(s.enumeration))}}}}}function a(e){for(var t in e){var r=e[t];r&&r.kind&&(r.kind=u(r.kind.toString()))}}function s(e){for(var t in e){var r=e[t];if(r){var i=r.conditions;if(i)for(var o in i){var n=i[o];if(n)for(var a in n){var s=n[a];s&&s.kind&&(n[a].kind=u(s.kind.toString()))}}}}}function u(t){switch(t.toLowerCase()){case"grouping":case e.VisualDataRoleKind.Grouping.toString():return e.VisualDataRoleKind.Grouping;case"measure":case e.VisualDataRoleKind.Measure.toString():return e.VisualDataRoleKind.Measure;case"groupingormeasure":case e.VisualDataRoleKind.GroupingOrMeasure.toString():return e.VisualDataRoleKind.GroupingOrMeasure}}function l(e){c(e.capabilities)}function c(e){e&&(p(e.objects),d(e.dataRoles))}function p(t){for(var r in t){var i=t[r];if(i){i=t[r]=_.mapValues(i,v);var o=i.properties;if(o)for(var n in o){var a=o[n];if(a){a=o[n]=_.mapValues(a,v);var s=a.type;if(s&&s.enumeration&&_.isFunction(s.enumeration.members)){var u=s.enumeration.members().map(function(e){return _.mapValues(e,v)});s.enumeration=e.createEnumType(u)}}}}}}function d(e){for(var t in e){var r=e[t];r&&(e[t]=_.mapValues(r,v))}}function v(t,r){return _.isString(t)||_.indexOf(h,r)===-1?t:e.data.getDisplayName(t,f)}var h=["displayName","description","placeHolderText"],f={get:function(e){return e},getOptional:function(e){return e},format:function(e){return e}};t.transformPlugin=r}(r=t.visualPluginAdapter||(t.visualPluginAdapter={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r=jsCommon.Trace,i=function(){function t(e,t,r,i,o,n){this.wrappedVisual=e,this.visualPlugin=t,this.promiseFactory=r,this.telemetryService=i,this.isPluginInError=o,this.silent=n,this.initCalled=!1,this.startTimeISO=(new Date).toISOString()}return t.prototype.init=function(e){var t=this;if(this.initCalled=!0,e&&e.host&&e.host.telemetry){var r=e.host.telemetry();this.instanceId=r&&r.instanceId}this.wrappedVisual.init&&this.executeSafely(function(){return t.wrappedVisual.init(e)})},t.prototype.checkInit=function(){return!!this.initCalled||(r.assertFail("Another visual method was called before init"),!1)},t.prototype.destroy=function(){var e=this;this.wrappedVisual.destroy&&this.executeSafely(function(){return e.wrappedVisual.destroy()})},t.prototype.update=function(t){var r=this;if(this.checkInit(),this.wrappedVisual.update)return this.executeSafelyAsync(function(){return __awaiter(r,void 0,e.Promise,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.wrappedVisual.update(t)];case 1:return i.sent(),this.telemetryService&&this.startTimeISO&&(r=(new Date).toISOString(),this.telemetryService.logEvent(e.telemetry.VisualApiUsage,this.visualPlugin.name,this.visualPlugin.apiVersion,!!this.visualPlugin.custom,this.visualPlugin.version,this.instanceId,this.startTimeISO,r,void 0,this.isPluginInError,"User",void 0),this.startTimeISO=null),[2]}})})})},t.prototype.onResizing=function(e,t){var r=this;this.checkInit(),this.wrappedVisual.onResizing&&this.executeSafely(function(){return r.wrappedVisual.onResizing(e,t)})},t.prototype.onDataChanged=function(e){var t=this;this.checkInit(),this.wrappedVisual.onDataChanged&&this.executeSafely(function(){return t.wrappedVisual.onDataChanged(e)})},t.prototype.onViewModeChanged=function(e){var t=this;this.checkInit(),this.wrappedVisual.onViewModeChanged&&this.executeSafely(function(){return t.wrappedVisual.onViewModeChanged(e)})},t.prototype.onClearSelection=function(){var e=this;this.checkInit(),this.wrappedVisual.onClearSelection&&this.executeSafely(function(){return e.wrappedVisual.onClearSelection()})},t.prototype.onRestoreSelection=function(e){var t=this;return this.checkInit(),!!this.wrappedVisual.onRestoreSelection&&this.executeSafely(function(){return t.wrappedVisual.onRestoreSelection(e)})},t.prototype.canResizeTo=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.canResizeTo)return this.executeSafely(function(){return t.wrappedVisual.canResizeTo(e)})},t.prototype.enumerateObjectInstances=function(e){var t=this;if(this.checkInit(),this.wrappedVisual.enumerateObjectInstances)return this.executeSafely(function(){return t.wrappedVisual.enumerateObjectInstances(e)})},t.prototype.enumerateObjectRepetition=function(){var e=this;if(this.checkInit(),this.wrappedVisual.enumerateObjectRepetition)return this.executeSafely(function(){return e.wrappedVisual.enumerateObjectRepetition()})},t.prototype.enumerateObjectInstancesAsync=function(e){var t=this;return this.checkInit(),this.visualAdapter.enumerateObjectInstancesAsync?this.executeSafely(function(){return t.visualAdapter.enumerateObjectInstancesAsync(e)}):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},t.prototype.enumerateObjectRepetitionAsync=function(){var e=this;return this.checkInit(),this.visualAdapter.enumerateObjectRepetitionAsync?this.executeSafely(function(){return e.visualAdapter.enumerateObjectRepetitionAsync()}):this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(t.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visualAdapter",{get:function(){return this.wrappedVisual},enumerable:!0,configurable:!0}),t.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},t.prototype.visualHasMethod=function(e){var t=this.wrappedVisual;return t&&t.visualHasMethod(e)},t.prototype.executeSafely=function(t){try{return t()}catch(t){!this.silent,this.telemetryService&&this.telemetryService.logEvent(e.telemetry.VisualException,this.visualPlugin.name,!!this.visualPlugin.custom,this.visualPlugin.apiVersion,this.instanceId,t.fileName,t.lineNumber,t.columnNumber,t.stack,t.message)}},t.prototype.executeSafelyAsync=function(t){return __awaiter(this,void 0,e.Promise,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return[2,i.sent()];case 2:return r=i.sent(),!this.silent,this.telemetryService&&this.telemetryService.logEvent(e.telemetry.VisualException,this.visualPlugin.name,!!this.visualPlugin.custom,this.visualPlugin.apiVersion,this.instanceId,r.fileName,r.lineNumber,r.columnNumber,r.stack,r.message),[3,3];case 3:return[2]}})})},t}();t.VisualSafeExecutionWrapper=i}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return function(t){t.__transform__=e.transform}}e.VisualPlugin=t}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new i(e)}function r(e){return new o(e)}e.createColorPalette=t,e.createExtendedColorPalette=r;var i=function(){function e(e){this.colorPalette={},this.colorIndex=0,this.colors=e}return e.prototype.getColor=function(e){var t=this.colorPalette[e];if(t)return t;var r=this.colors;return t=this.colorPalette[e]=r[this.colorIndex++],this.colorIndex>=r.length&&(this.colorIndex=0),t},e.prototype.reset=function(){return this.colorIndex=0,this},e}(),o=function(e){function t(t){var r=this,i=t.colorPalette.dataColors;r=e.call(this,i.getAllColors())||this,r.isHighContrast=t.isHighContrast,r.foreground=t.colorPalette.foreground,r.foregroundLight=t.colorPalette.foregroundLight,r.foregroundDark=t.colorPalette.foregroundDark,r.foregroundNeutralLight=t.colorPalette.foregroundNeutralLight,r.foregroundNeutralDark=t.colorPalette.foregroundNeutralDark,r.foregroundNeutralSecondary=t.colorPalette.foregroundNeutralSecondary,r.foregroundNeutralSecondaryAlt=t.colorPalette.foregroundNeutralSecondaryAlt,r.foregroundNeutralSecondaryAlt2=t.colorPalette.foregroundNeutralSecondaryAlt2,r.foregroundNeutralTertiary=t.colorPalette.foregroundNeutralTertiary,r.foregroundNeutralTertiaryAlt=t.colorPalette.foregroundNeutralTertiaryAlt,r.foregroundSelected=t.colorPalette.foregroundSelected,r.foregroundButton=t.colorPalette.foregroundButton,r.background=t.colorPalette.background,r.backgroundLight=t.colorPalette.backgroundLight,r.backgroundNeutral=t.colorPalette.backgroundNeutral,r.backgroundDark=t.colorPalette.backgroundDark,r.hyperlink=t.colorPalette.hyperlink,r.visitedHyperlink=t.colorPalette.visitedHyperlink,r.mapPushpin=t.colorPalette.mapPushpin,r.shapeStroke=t.colorPalette.shapeStroke;var o=i.getSentimentColors();r.bad=o.bad,r.neutral=o.neutral,r.good=o.good;var n=i.getGradientColors();return r.minimum=n.minColor,r.center=n.midColor,r.maximium=n.maxColor,r.null=n.nullColor,r.negative=o.bad,r.positive=o.good,r.selection=t.colorPalette.selection,r.separator=t.colorPalette.separator,r}return __extends(t,e),t}(i)}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r=function(){function t(){}return t.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=[e.identity[t]]),this},t.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=[t.identity]),this},t.prototype.withMeasure=function(e){return this.measure=e,this},t.prototype.createSelectionId=function(){return e.visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},t.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},t}();t.SelectionIdBuilder=r}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r=e.visuals.CustomVisualSelectionId,i=jsCommon.Version,o=function(){function t(e,t){void 0===t&&(t=!1),this.dataPointObjectName="dataPoint",this.filterPropertyIdentifier={objectName:"general",propertyName:"filter"},this.hostServices=e.hostServices,this.apiVersion=e.apiVersion,this.selectedIds=[],this.promiseFactory=this.hostServices.promiseFactory(),this.noIframe=t}return t.prototype.select=function(e,t){void 0===t&&(t=!1);var r=this.promiseFactory.defer();return e?(e instanceof Array||(e=[e]),this.hostServices.shouldRetainSelection()?this.sendSelectionToHost(e,t):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds,t)),r.resolve(this.selectedIds),r.promise):(r.reject(),r.promise)},t.prototype.showContextMenu=function(e,t){var r=this.promiseFactory.defer();return e||(e={}),this.sendContextMenuToHost(e,t),r.resolve(null),r.promise},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.clear=function(){var e=this.promiseFactory.defer();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(null),e.promise},t.prototype.getSelectionIds=function(){return this.selectedIds},t.prototype.setSelectionIds=function(e){this.selectedIds=e},t.prototype.sendSelectionToHost=function(e,t){if(this.noIframe||!this.apiVersion||i.lt(this.apiVersion,"2.0.0")){var r=this.dataPointObjectName,o={visualObjects:_.chain(e).filter(function(e){return e.hasIdentity()}).map(function(e){return{objectName:r,selectorsByColumn:e.getSelectorsByColumn()}}).value(),selectors:void 0,multiSelect:t},n=!1;_.isEmpty(e)||(n=e[0].getSelector()&&!e[0].getSelectorsByColumn()),n&&(o.selectors=_.chain(e).filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()}).value()),this.hostServices.onSelect(o)}else this.hostServices.sendSelectionIdsToHost(this.prepareCustomVisualSelectEventArgs(e,t))},t.prototype.sendContextMenuToHost=function(e,t){if(e&&t){var r={data:[e],position:t};this.hostServices.customVisualOnContextMenu(r)}},t.prototype.selectInternal=function(e,r){var i=this;e.length<1||(e.length>1?r?this.selectedIds=e.filter(function(e){return!i.selectedIds.some(function(t){return t.equals(e)})}).concat(this.selectedIds.filter(function(t){return!e.some(function(e){return e.equals(t)})})):this.selectedIds=e:t.containsSelection(this.selectedIds,e[0])?r?this.selectedIds=this.selectedIds.filter(function(t){return!e[0].equals(t)}):this.selectedIds=this.selectedIds.length>1?e:[]:r?this.selectedIds.push(e[0]):this.selectedIds=e)},t.containsSelection=function(e,t){return e.some(function(e){return t.equals(e)})},t.getSelectorsByColumn=function(e){return e&&e[0]instanceof r?e:_(e).filter(function(e){return e.hasIdentity}).map(function(e){return e.getSelectorsByColumn()}).compact().value()},t.createChangeForFilterProperty=function(e,t){var r={},i={objectName:e.objectName,selector:void 0,properties:r};return null==t?(r[e.propertyName]={},{remove:[i]}):(r[e.propertyName]=t,{merge:[i]})},t.prototype.getFilterFromSelectors=function(){if(this.hasSelection()){var t=_.chain(this.selectedIds).filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()}).value();return e.data.Selector.filterFromSelector(t,!1)}},t.prototype.prepareCustomVisualSelectEventArgs=function(e,t){var r={selectionIds:[],multiSelect:t};if(e&&e[0]&&(e[0].dataMap||e[0].measures))for(var i=0,o=e;i<o.length;i++){var n=o[i];r.selectionIds.push(n)}return r},t.prototype.applySelectionFilter=function(){this.hostServices.persistProperties(t.createChangeForFilterProperty(this.filterPropertyIdentifier,this.getFilterFromSelectors()))},t.prototype.registerOnSelectCallback=function(e){this.onSelectCallback=e},t.prototype.invokeOnSelectCallback=function(e){_.isFunction(this.onSelectCallback)&&this.onSelectCallback(e)},t}();t.SelectionManager=o}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new r(e)}e.createTooltipService=t;var r=function(){function t(e){this.hostServices=e.hostServices,this.tooltipService=this.hostServices.tooltips()}return t.prototype.enabled=function(){return this.tooltipService&&this.tooltipService.enabled()},t.prototype.show=function(t){if(this.enabled()){var r={coordinates:t.coordinates,dataItems:t.dataItems,isTouchEvent:t.isTouchEvent,identities:e.SelectionManager.getSelectorsByColumn(t.identities)};this.tooltipService.show(r)}},t.prototype.move=function(t){if(this.enabled()){var r={coordinates:t.coordinates,dataItems:t.dataItems,isTouchEvent:t.isTouchEvent,identities:e.SelectionManager.getSelectorsByColumn(t.identities)};this.tooltipService.move(r)}},t.prototype.hide=function(e){this.enabled()&&this.tooltipService.hide(e)},t}()}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new o(e)}function r(e){switch(e){case 3:return"VisualEventError";case 2:return"VisualEventTrace";case 0:return"VisualEventRenderStarted";case 1:return"VisualEventRenderCompleted";default:return}}function i(e){switch(e){case"VisualEventError":return 3;case"VisualEventTrace":return 2;case"VisualEventRenderStarted":return 0;case"VisualEventRenderCompleted":return 1;default:return}}e.createTelemetryService=t;var o=function(){function e(e){this.hostServices=e.hostServices,this.telemetryService=this.hostServices&&this.hostServices.telemetry&&this.hostServices.telemetry(),this.instanceId=this.telemetryService&&this.telemetryService.instanceId}return e.prototype.trace=function(e,t){this.telemetryService&&this.telemetryService.trace(e,t)},e}();e.convertVisualEventType=r,e.convertStringToVisualEventType=i}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new r(e)}e.createAuthenticationService=t;var r=function(){function e(e){this.hostServices=e.hostServices,this.authenticationService=this.hostServices&&this.hostServices.authenticationService&&this.hostServices.authenticationService(),this.promiseFactory=this.hostServices.promiseFactory()}return e.prototype.getAADToken=function(){return this.authenticationService?this.authenticationService.getAADToken():this.promiseFactory.reject()},e.prototype.getWACToken=function(e,t){return this.authenticationService?this.authenticationService.getWACToken(e,t):this.promiseFactory.reject()},e}()}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e){this.localizationResources=e}return e.prototype.getDisplayName=function(e){var t=this.localizationResources;return t&&t.localizedStrings&&t.localizedStrings.hasOwnProperty(e)?t.localizedStrings[e]:t&&t.enUSStrings&&t.enUSStrings.hasOwnProperty(e)?t.enUSStrings[e]:e},e}();e.LocalizationManager=t}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new r(e)}e.createEventService=t;var r=function(){function e(e){this.eventService=e&&e.eventService&&e.eventService()}return e.prototype.renderingStarted=function(e){this.eventService&&this.eventService.renderingStarted(e)},e.prototype.renderingFinished=function(e){this.eventService&&this.eventService.renderingFinished(e)},e.prototype.renderingFailed=function(e,t){this.eventService&&this.eventService.renderingFailed(e,t)},e}()}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(e){var t=e,r=null!=t.data||null!=t.selectors,i=_.some(t.visualObjects,function(e){return e.selectorsByColumn&&e.selectorsByColumn.metadata&&!_.isArray(e.selectorsByColumn.metadata)});return r||i}function i(e){var t;if(e.data2)t=e.data2;else{if(e.selectors||e.data)return _.map(e.selectors||e.data,function(e){return o(e)});if(!e.visualObjects)return[];t=_.map(e.visualObjects,function(e){return e.selectorsByColumn})}for(var r=0,i=t;r<i.length;r++){var n=i[r],a=n.metadata;a&&!_.isArray(a)&&(n.metadata=[a])}return t}function o(e){if(e){var t={};return t[""]=e.data,{dataMap:t,metadata:[e.metadata]}}}function n(e){return null!=e.selectors?e.selectors:e.data?e.data:e.visualObjects?_.map(e.visualObjects,function(e){return a.convertSelectorsByColumnToSelector(e.selectorsByColumn)}):e.data}var a=e.data.Selector;t.isOldSelectEventArgs=r,t.getSelectorsByColumn=i,t.getSelectors=n}(r=t.legacy||(t.legacy={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){function i(t){var r=t.type||e.VisualUpdateType.Data;return r&e.VisualUpdateType.Resize&&2===t.resizeMode&&(r|=e.VisualUpdateType.ResizeEnd),r}r.convertLegacyUpdateType=i;var o=function(e,t){return{update:function(t){e.update&&e.update({viewport:t.viewport,dataViews:t.dataViews,viewMode:t.viewMode,type:i(t)})},destroy:function(){e.destroy&&e.destroy()},enumerateObjectInstances:function(t){return e.enumerateObjectInstances?e.enumerateObjectInstances(t)||[]:[]}}},n=function(e){return{}};t.visualApiVersions.push({version:"1.0.0",overloads:o,hostAdapter:n})}(r=t.v100||(t.v100={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(e,r){return{update:function(r){if(e.update){var i={viewport:r.viewport,dataViews:r.dataViews,viewMode:r.viewMode,type:t.v100.convertLegacyUpdateType(r)},o=e.constructor.__transform__;_.isFunction(o)?e.update(i,o(i.dataViews)):e.update(i)}}}},n=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colors:o}};t.visualApiVersions.push({version:"1.1.0",overloads:o,hostAdapter:n})}(r=t.v110||(t.v110={}))}(t=e.extensibility||(e.extensibility={}));
}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,type:t.v100.convertLegacyUpdateType(i)};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},n=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)}}};t.visualApiVersions.push({version:"1.2.0",overloads:o,hostAdapter:n})}(r=t.v120||(t.v120={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host})}};t.visualApiVersions.push({version:"1.3.0",hostAdapter:o})}(r=t.v130||(t.v130={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),locale:r.host.locale()}};t.visualApiVersions.push({version:"1.4.0",hostAdapter:o})}(r=t.v140||(t.v140={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive}};t.visualApiVersions.push({version:"1.5.0",hostAdapter:o})}(r=t.v150||(t.v150={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,editMode:i.editMode,type:t.v100.convertLegacyUpdateType(i)};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},n=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive}};t.visualApiVersions.push({version:"1.6.0",overloads:o,hostAdapter:n})}(r=t.v160||(t.v160={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i){if(e){var o=[];o.push(e),r.host.applyJsonFilter(o,t,i)}else r.host.applyJsonFilter(null,t,i)}}};t.visualApiVersions.push({version:"1.7.0",hostAdapter:o})}(r=t.v170||(t.v170={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()}}};t.visualApiVersions.push({version:"1.8.0",hostAdapter:o})}(r=t.v180||(t.v180={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()}}};t.visualApiVersions.push({version:"1.9.0",hostAdapter:o})}(r=t.v190||(t.v190={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)}}};t.visualApiVersions.push({version:"1.10.0",hostAdapter:o})}(r=t.v1100||(t.v1100={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(r){var o=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){var e=r.host;return e.selectionManager=new t.SelectionManager({hostServices:e}),e.selectionManager},colorPalette:t.createColorPalette(o),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)}}};t.visualApiVersions.push({version:"1.11.0",hostAdapter:o})}(r=t.v1110||(t.v1110={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=e.visualHost.VisualHostUtils,o=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,editMode:i.editMode,operationKind:i.operationKind,type:t.v100.convertLegacyUpdateType(i)};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},n=function(r){var o=r.host,n=i.isDefined(r,"style.colorPalette.dataColors.getAllColors")?r.style.colorPalette.dataColors.getAllColors():e.visuals.DefaultColorManager.getDefaultColors();return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return o.selectionManager=new t.SelectionManager({hostServices:o}),o.selectionManager},colorPalette:t.createColorPalette(n),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()}}};t.visualApiVersions.push({version:"1.12.0",overloads:o,hostAdapter:n})}(r=t.v011200||(t.v011200={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(r){var i=r.host;return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return i.selectionManager=new t.SelectionManager({hostServices:i}),i.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return i.fetchMoreData()}}};t.visualApiVersions.push({version:"1.13.0",hostAdapter:i})}(r=t.v011300||(t.v011300={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i="2.0.0",o=function(r){var o=r.host;return o.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return o.selectionManager=new t.SelectionManager({hostServices:o,apiVersion:i}),o.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e){var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()}}};t.visualApiVersions.push({version:i,hostAdapter:o})}(r=t.v020000||(t.v020000={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){var r="2.1.0",i=function(t,r){return{update:function(i){if(t.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,editMode:i.editMode,operationKind:i.operationKind,type:e.v100.convertLegacyUpdateType(i),jsonFilters:i.jsonFilters};r.colorPalette.reset();var n=t.constructor.__transform__;_.isFunction(n)?t.update(o,n(o.dataViews)):t.update(o)}}}},o=function(t){var i=t.host;return i.apiVersion=r,{createSelectionIdBuilder:function(){return i.createSelectionIdBuilder()},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(r),i.selectionManager},colorPalette:e.createExtendedColorPalette(t.style),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:e.createTelemetryService({hostServices:t.host}),authenticationService:e.createAuthenticationService({hostServices:t.host}),locale:t.host.locale(),allowInteractions:!(!t||!t.interactivity)&&t.interactivity.isVisualInteractive,applyJsonFilter:function(e,r,i,o){if(e){var n=[];n.push(e),t.host.applyJsonFilter(n,r,i,o)}else t.host.applyJsonFilter(null,r,i,o)},launchUrl:function(e){return t.host.launchUrl(e)},instanceId:t.host.instanceId,refreshHostData:function(){return t.host.refreshHostData()},createLocalizationManager:function(){return new e.LocalizationManager(t.localizationResources)},fetchMoreData:function(){return i.fetchMoreData()}}};e.visualApiVersions.push({version:r,overloads:i,hostAdapter:o})}(t=e.v020100||(e.v020100={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){var r="2.2.0",i=function(t){var i=t.host;return i.apiVersion=r,{createSelectionIdBuilder:function(){return i.createSelectionIdBuilder()},createSelectionManager:function(){return i.selectionManager=i.createSelectionManager(r),i.selectionManager},colorPalette:e.createExtendedColorPalette(t.style),persistProperties:function(e){return t.host.persistProperties(e)},tooltipService:i.createTooltipService(),telemetry:e.createTelemetryService({hostServices:t.host}),authenticationService:e.createAuthenticationService({hostServices:t.host}),locale:t.host.locale(),allowInteractions:!(!t||!t.interactivity)&&t.interactivity.isVisualInteractive,applyJsonFilter:function(e,r,i,o){if(e){var n=[];n.push(e),t.host.applyJsonFilter(n,r,i,o)}else t.host.applyJsonFilter(null,r,i,o)},launchUrl:function(e){return t.host.launchUrl(e)},instanceId:t.host.instanceId,refreshHostData:function(){return t.host.refreshHostData()},createLocalizationManager:function(){return new e.LocalizationManager(t.localizationResources)},fetchMoreData:function(){return i.fetchMoreData()}}};e.visualApiVersions.push({version:r,hostAdapter:i})}(t=e.v020200||(e.v020200={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i="2.3.0",o=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,editMode:i.editMode,operationKind:i.operationKind,jsonFilters:i.jsonFilters,type:t.v100.convertLegacyUpdateType(i),updateId:jsCommon.Utility.generateGuid()};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},n=function(r){var o=r.host;return o.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return o.selectionManager=o.createSelectionManager(i),o.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:o.createTooltipService(),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e)if(Array.isArray(e))r.host.applyJsonFilter(e,t,i,o);else{var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()},storageService:t.createStorageService(o),eventService:t.createEventService(o)}};t.visualApiVersions.push({version:i,overloads:o,hostAdapter:n})}(r=t.v020300||(t.v020300={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i="2.4.0",o=function(r){var o=r.host;return o.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return o.selectionManager=o.createSelectionManager(i),o.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:o.createTooltipService(),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e)if(Array.isArray(e))r.host.applyJsonFilter(e,t,i,o);else{var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()},storageService:t.createStorageService(o),eventService:t.createEventService(o)}};t.visualApiVersions.push({version:i,hostAdapter:o})}(r=t.v020400||(t.v020400={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i="2.5.0",o=function(r){var o=r.host;return o.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return o.selectionManager=o.createSelectionManager(i),o.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:o.createTooltipService(),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e)if(Array.isArray(e))r.host.applyJsonFilter(e,t,i,o);else{var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()},storageService:t.createStorageService(o),eventService:t.createEventService(o)}};t.visualApiVersions.push({version:i,hostAdapter:o})}(r=t.v020500||(t.v020500={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i="2.6.0",o=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,editMode:i.editMode,isInFocus:!!i.isInFocus,operationKind:i.operationKind,jsonFilters:i.jsonFilters,type:t.v100.convertLegacyUpdateType(i),updateId:jsCommon.Utility.generateGuid()};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},n=function(r){var o=r.host;return o.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return o.selectionManager=o.createSelectionManager(i),o.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:o.createTooltipService(),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e)if(Array.isArray(e))r.host.applyJsonFilter(e,t,i,o);else{var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()},storageService:t.createStorageService(o),eventService:t.createEventService(o),switchFocusModeState:function(e){return o.switchFocusModeState(e)}}};t.visualApiVersions.push({version:i,overloads:o,hostAdapter:n})}(r=t.v020600||(t.v020600={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i="3.2.0",o=function(r){var o=r.host;return o.apiVersion=i,{createSelectionIdBuilder:function(){return new e.visuals.CustomVisualSelectionId},createSelectionManager:function(){return o.selectionManager=o.createSelectionManager(i),o.selectionManager},colorPalette:t.createExtendedColorPalette(r.style),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:o.createTooltipService(),telemetry:t.createTelemetryService({hostServices:r.host}),authenticationService:t.createAuthenticationService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive,applyJsonFilter:function(e,t,i,o){if(e)if(Array.isArray(e))r.host.applyJsonFilter(e,t,i,o);else{var n=[];n.push(e),r.host.applyJsonFilter(n,t,i,o)}else r.host.applyJsonFilter(null,t,i,o)},launchUrl:function(e){return r.host.launchUrl(e)},instanceId:r.host.instanceId,refreshHostData:function(){return r.host.refreshHostData()},createLocalizationManager:function(){return new t.LocalizationManager(r.localizationResources)},fetchMoreData:function(){return o.fetchMoreData()},storageService:t.createStorageService(o),eventService:t.createEventService(o),switchFocusModeState:function(e){return o.switchFocusModeState(e)},hostEnv:r.hostEnv}};t.visualApiVersions.push({version:i,hostAdapter:o})}(r=t.v030200||(t.v030200={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){function i(t,r){if(void 0===d)try{if(!(r&&t&&t.featureSwitches&&t.featureSwitches.customVisualsTenantSwitch))return d=c.FeatureIsDisabled;d=t.featureSwitches.customVisualsTenantEnabled?t.featureSwitches.certifiedCustomVisualsTenantEnabled?c.NonCertifiedCustomVisualsAreDisabled:c.AllCustomVisualsAreEnabled:c.AllCustomVisualsAreDisabled,r.logEvent(e.telemetry.AdminControlInitialized,c[d])}catch(e){d=c.FailedEvaluatingState}return d}function o(e,t,r,i,o,n,a){return n||a?s(t,!0,n,a,r,i,o):s(t,e.featureSwitches.customVisualsTenantSwitch,!e.featureSwitches.customVisualsTenantEnabled,e.featureSwitches.certifiedCustomVisualsTenantEnabled,r,i,o)}function n(e,t){return t||e.featureSwitches.customVisualsTenantSwitch&&!e.featureSwitches.customVisualsTenantEnabled}function a(t){return t&&_.endsWith(t,e.visualHost.OrgStoreVisualSuffix)}function s(e,r,i,o,n,s,u){return!(!r||e===t.EsriVisual||a(e)||u)&&(!!i||!(!o||n.isApprovedResourceServerRender(e))&&(!s||n.isApprovedVisualsDefined()))}function u(e,t,r){return r?a(t)?p.OrganizationalStore:e.isApprovedVisualsDefined()?e.isApprovedResourceServerRender(t)?p.CertifiedCustomVisual:e.isApprovedResource(t)?p.NonCertifiedCustomVisual:p.NonCdnCustomVisual:p.Unclassified:p.Native}function l(e){switch(e){case 0:return"allow-scripts";case 1:return"allow-popups";case 2:return"allow-same-origin";case 3:return"allow-forms";case 4:return"allow-top-navigation-by-user-activation"}}var c;!function(e){e[e.FeatureIsDisabled=0]="FeatureIsDisabled",e[e.AllCustomVisualsAreEnabled=1]="AllCustomVisualsAreEnabled",e[e.AllCustomVisualsAreDisabled=2]="AllCustomVisualsAreDisabled",e[e.NonCertifiedCustomVisualsAreDisabled=3]="NonCertifiedCustomVisualsAreDisabled",e[e.FailedEvaluatingState=4]="FailedEvaluatingState"}(c=r.CustomVisualsAdminControlState||(r.CustomVisualsAdminControlState={}));var p;!function(e){e[e.Unclassified=0]="Unclassified",e[e.NonCertifiedCustomVisual=1]="NonCertifiedCustomVisual",e[e.NonCdnCustomVisual=2]="NonCdnCustomVisual",e[e.CertifiedCustomVisual=3]="CertifiedCustomVisual",e[e.OrganizationalStore=4]="OrganizationalStore",e[e.Native=5]="Native"}(p=r.CustomVisualTypes||(r.CustomVisualTypes={}));var d;r.getAdminControlState=i,r.isCustomVisualTypeDisabled=o,r.areCustomVisualsDisabled=n,r.isOrganizationalCustomVisual=a,r.isCustomVisualTypeDisabledHelper=s,r.getCustomVisualType=u,r.SandboxPropertyTranslator=l}(r=t.CustomVisualsUtils||(t.CustomVisualsUtils={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new r(e)}e.createStorageService=t;var r=function(){function e(e){this.storageService=e&&e.localStorageService&&e.localStorageService(),this.promiseFactory=e.promiseFactory()}return e.prototype.get=function(e){return null!=this.storageService&&e?this.storageService.getStorageData(e):this.promiseFactory.reject()},e.prototype.set=function(e,t){return null!=this.storageService&&e&&t?this.storageService.setStorageData(e,t):this.promiseFactory.reject()},e.prototype.remove=function(e){null!=this.storageService&&e&&this.storageService.removeStorageData(e)},e}()}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));